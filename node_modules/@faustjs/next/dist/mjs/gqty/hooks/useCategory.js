// eslint-disable-next-line import/extensions
import { CategoryIdType } from '@faustjs/core/client';
import { useRouter } from 'next/router.js';
import isString from 'lodash/isString.js';
import defaults from 'lodash/defaults.js';
import { hasCategoryId, hasCategorySlug } from '../../utils/index.js';
export function create(useQuery) {
    return (args) => {
        const { query } = useRouter();
        const { category } = useQuery();
        let params = defaults({}, args);
        if (hasCategoryId(query)) {
            params = {
                id: query.categoryId,
                idType: CategoryIdType.ID,
                ...params,
            };
        }
        if (hasCategorySlug(query)) {
            params = {
                id: query.categorySlug,
                idType: CategoryIdType.SLUG,
                ...params,
            };
        }
        if (!isString(params.id)) {
            throw new Error('Invalid parameters for useCategory, you must send in an id or specify known URL params in your config');
        }
        return category(params);
    };
}
