!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SpreeSDK=t():(e.SpreeSDK=e.SpreeSDK||{},e.SpreeSDK.createFetchFetcher=t())}(global,(function(){return(()=>{"use strict";var e={306:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=o(r(527));class s extends n.default{constructor(e,t,r,o){super(o),Object.setPrototypeOf(this,s.prototype),this.name="FetchError",this.response=e,this.request=t,this.data=r}}t.default=s},527:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,r.prototype),this.name="SpreeSDKError"}}t.default=r},990:function(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createCustomizedFetchFetcher=void 0;const n=o(r(306)),s=r(327),a=e=>{const t={"Content-Type":"application/json"},{host:r,fetch:o,requestConstructor:a}=e;return{fetch:async e=>{try{const{url:c,params:u,method:i,headers:l,responseParsing:f}=e,p=new URL(c,r);let d;switch(i.toUpperCase()){case"PUT":case"POST":case"DELETE":case"PATCH":d={body:JSON.stringify(u)};break;default:d=null,p.search=(0,s.objectToQuerystring)(u)}const h=new a(p.toString(),{method:i.toUpperCase(),headers:{...t,...l},...d});try{const e=await o(h),t=e.headers.get("content-type");let r;if("automatic"===f?r=t&&(t.includes("application/json")||t.includes("application/vnd.api+json"))?await e.json():await e.text():"text"===f?r=await e.text():"json"===f?r=await e.json():"stream"===f&&(r=await e.body),!e.ok)throw new n.default(e,h,r);return{data:r}}catch(e){if(e instanceof n.default)throw e;throw new n.default(null,h,null,e.message)}}catch(e){if(e instanceof n.default)throw e;throw new n.default(null,null,null,e.message)}}}};t.createCustomizedFetchFetcher=a,t.default=e=>{let t,o;if(globalThis.fetch&&globalThis.Request)t=globalThis.fetch,o=globalThis.Request;else{const e=r(809);t=e.default,o=e.Request}return a({fetch:t,requestConstructor:o,...e})}},327:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.objectToQuerystring=void 0;const r=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),o=(e,t)=>{if(0===e.length)return e;let o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===t)return escape(o).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));let n="";for(let e=0;e<o.length;++e){let t=o.charCodeAt(e);45===t||46===t||95===t||126===t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122?n+=o.charAt(e):t<128?n+=r[t]:t<2048?n+=r[192|t>>6]+r[128|63&t]:t<55296||t>=57344?n+=r[224|t>>12]+r[128|t>>6&63]+r[128|63&t]:(e+=1,t=65536+((1023&t)<<10|1023&o.charCodeAt(e)),n+=r[240|t>>18]+r[128|t>>12&63]+r[128|t>>6&63]+r[128|63&t])}return n},n=Array.isArray,s=Array.prototype.push,a=(e,t)=>{s.apply(e,n(t)?t:[t])},c=e=>String(e),u=(e,t)=>e+"[]",i="utf-8",l=(e,t)=>{var r,s;if(e instanceof Date&&(e=e.toISOString()),null===e&&(e=""),"string"==typeof(s=e)||"number"==typeof s||"boolean"==typeof s||"symbol"==typeof s||"bigint"==typeof s||(r=e)&&"object"==typeof r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r)){const r=o(t,i);return[c(r)+"="+c(o(e,i))]}const f=[];if(void 0===e)return f;const p=Object.keys(e);for(let r=0;r<p.length;++r){const o=p[r],s=e[o],c=n(e)?u(t):t+"["+o+"]";a(f,l(s,c))}return f};t.objectToQuerystring=e=>{const t=[],r=Object.keys(e);for(let o=0;o<r.length;++o){const n=r[o];a(t,l(e[n],n))}return t.join("&")}},809:e=>{e.exports=require("node-fetch")}},t={};return function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,r),s.exports}(990)})()}));
//# sourceMappingURL=createFetchFetcher.js.map