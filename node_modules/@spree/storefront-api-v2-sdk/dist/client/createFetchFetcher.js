!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SpreeSDK=t():(e.SpreeSDK=e.SpreeSDK||{},e.SpreeSDK.createFetchFetcher=t())}(self,(function(){return(()=>{"use strict";var e={306:function(e,t,o){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(o(527));class s extends n.default{constructor(e,t,o,r){super(r),Object.setPrototypeOf(this,s.prototype),this.name="FetchError",this.response=e,this.request=t,this.data=o}}t.default=s},527:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class o extends Error{constructor(e){super(e),Object.setPrototypeOf(this,o.prototype),this.name="SpreeSDKError"}}t.default=o},990:function(e,t,o){var r=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(n,s){function c(e){try{u(r.next(e))}catch(e){s(e)}}function i(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,i)}u((r=r.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createCustomizedFetchFetcher=void 0;const s=n(o(306)),c=o(327),i=e=>{const t={"Content-Type":"application/json"},{host:o,fetch:n,requestConstructor:i}=e;return{fetch:e=>r(void 0,void 0,void 0,(function*(){try{const{url:r,params:u,method:a,headers:l,responseParsing:f}=e,p=new URL(r,o);let d;switch(a.toUpperCase()){case"PUT":case"POST":case"DELETE":case"PATCH":d={body:JSON.stringify(u)};break;default:d=null,p.search=(0,c.objectToQuerystring)(u)}const h=new i(p.toString(),Object.assign({method:a.toUpperCase(),headers:Object.assign(Object.assign({},t),l)},d));try{const e=yield n(h),t=e.headers.get("content-type");let o;if("automatic"===f?o=t&&(t.includes("application/json")||t.includes("application/vnd.api+json"))?yield e.json():yield e.text():"text"===f?o=yield e.text():"json"===f?o=yield e.json():"stream"===f&&(o=yield e.body),!e.ok)throw new s.default(e,h,o);return{data:o}}catch(e){if(e instanceof s.default)throw e;throw new s.default(null,h,null,e.message)}}catch(e){if(e instanceof s.default)throw e;throw new s.default(null,null,null,e.message)}}))}};t.createCustomizedFetchFetcher=i,t.default=e=>{let t,r;if(globalThis.fetch&&globalThis.Request)t=globalThis.fetch,r=globalThis.Request;else{const e=o(809);t=e.default,r=e.Request}return i(Object.assign({fetch:t,requestConstructor:r},e))}},327:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.objectToQuerystring=void 0;const o=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),r=(e,t)=>{if(0===e.length)return e;let r=e;if("symbol"==typeof e?r=Symbol.prototype.toString.call(e):"string"!=typeof e&&(r=String(e)),"iso-8859-1"===t)return escape(r).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));let n="";for(let e=0;e<r.length;++e){let t=r.charCodeAt(e);45===t||46===t||95===t||126===t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122?n+=r.charAt(e):t<128?n+=o[t]:t<2048?n+=o[192|t>>6]+o[128|63&t]:t<55296||t>=57344?n+=o[224|t>>12]+o[128|t>>6&63]+o[128|63&t]:(e+=1,t=65536+((1023&t)<<10|1023&r.charCodeAt(e)),n+=o[240|t>>18]+o[128|t>>12&63]+o[128|t>>6&63]+o[128|63&t])}return n},n=Array.isArray,s=Array.prototype.push,c=(e,t)=>{s.apply(e,n(t)?t:[t])},i=e=>String(e),u=(e,t)=>e+"[]",a="utf-8",l=(e,t)=>{var o,s;if(e instanceof Date&&(e=e.toISOString()),null===e&&(e=""),"string"==typeof(s=e)||"number"==typeof s||"boolean"==typeof s||"symbol"==typeof s||"bigint"==typeof s||(o=e)&&"object"==typeof o&&o.constructor&&o.constructor.isBuffer&&o.constructor.isBuffer(o)){const o=r(t,a);return[i(o)+"="+i(r(e,a))]}const f=[];if(void 0===e)return f;const p=Object.keys(e);for(let o=0;o<p.length;++o){const r=p[o],s=e[r],i=n(e)?u(t):t+"["+r+"]";c(f,l(s,i))}return f};t.objectToQuerystring=e=>{const t=[],o=Object.keys(e);for(let r=0;r<o.length;++r){const n=o[r];c(t,l(e[n],n))}return t.join("&")}},809:e=>{e.exports=require("node-fetch")}},t={};return function o(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,o),s.exports}(990)})()}));
//# sourceMappingURL=createFetchFetcher.js.map