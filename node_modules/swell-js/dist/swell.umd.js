!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("isomorphic-fetch"),require("qs"),require("object-merge-advanced"),require("object-keys-normalizer")):"function"==typeof define&&define.amd?define(["isomorphic-fetch","qs","object-merge-advanced","object-keys-normalizer"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["swell-js"]=e(null,t.qs,t.objectMergeAdvanced,t.objectKeysNormalizer)}(this,(function(t,e,r,n){"use strict";var o="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},i=[],a=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,u=!1;function c(){u=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)i[e]=t[e],a[t.charCodeAt(e)]=e;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63}function l(t,e,r){for(var n,o,a=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],a.push(i[(o=n)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return a.join("")}function f(t){var e;u||c();for(var r=t.length,n=r%3,o="",a=[],s=16383,f=0,h=r-n;f<h;f+=s)a.push(l(t,f,f+s>h?h:f+s));return 1===n?(e=t[r-1],o+=i[e>>2],o+=i[e<<4&63],o+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],o+=i[e>>10],o+=i[e>>4&63],o+=i[e<<2&63],o+="="),a.push(o),a.join("")}function h(t,e,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?o-1:0,h=r?-1:1,p=t[e+f];for(f+=h,i=p&(1<<-l)-1,p>>=-l,l+=s;l>0;i=256*i+t[e+f],f+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=c}return(p?-1:1)*a*Math.pow(2,i-n)}function p(t,e,r,n,o,i){var a,s,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,o),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[r+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[r+p]=255&a,p+=d,a/=256,c-=8);t[r+p-d]|=128*g}var d={}.toString,g=Array.isArray||function(t){return"[object Array]"==d.call(t)};function y(){return b.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function m(t,e){if(y()<e)throw new RangeError("Invalid typed array length");return b.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=b.prototype:(null===t&&(t=new b(e)),t.length=e),t}function b(t,e,r){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return j(this,t)}return w(this,t,e,r)}function w(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);b.TYPED_ARRAY_SUPPORT?(t=e).__proto__=b.prototype:t=A(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!b.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|C(e,r),o=(t=m(t,n)).write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(E(e)){var r=0|S(e.length);return 0===(t=m(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?m(t,0):A(t,e);if("Buffer"===e.type&&g(e.data))return A(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function _(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function j(t,e){if(_(e),t=m(t,e<0?0:0|S(e)),!b.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function A(t,e){var r=e.length<0?0:0|S(e.length);t=m(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function S(t){if(t>=y())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y().toString(16)+" bytes");return 0|t}function E(t){return!(null==t||!t._isBuffer)}function C(t,e){if(E(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return tt(t).length;default:if(n)return Q(t).length;e=(""+e).toLowerCase(),n=!0}}function O(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Y(this,e,r);case"utf8":case"utf-8":return z(this,e,r);case"ascii":return L(this,e,r);case"latin1":case"binary":return q(this,e,r);case"base64":return B(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function x(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function P(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=b.from(e,n)),E(e))return 0===e.length?-1:R(t,e,r,n,o);if("number"==typeof e)return e&=255,b.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):R(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function R(t,e,r,n,o){var i,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var l=-1;for(i=r;i<s;i++)if(c(t,i)===c(e,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(r+u>s&&(r=s-u),i=r;i>=0;i--){for(var f=!0,h=0;h<u;h++)if(c(t,i+h)!==c(e,h)){f=!1;break}if(f)return i}return-1}function k(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function U(t,e,r,n){return et(Q(e,t.length-r),t,r,n)}function I(t,e,r,n){return et(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function T(t,e,r,n){return I(t,e,r,n)}function $(t,e,r,n){return et(tt(e),t,r,n)}function D(t,e,r,n){return et(function(t,e){for(var r,n,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function B(t,e,r){return 0===e&&r===t.length?f(t):f(t.slice(e,r))}function z(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,a,s,u,c=t[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&c)<<6|63&i)>127&&(l=u);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(u=(15&c)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=f}return function(t){var e=t.length;if(e<=M)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=M));return r}(n)}b.TYPED_ARRAY_SUPPORT=void 0===o.TYPED_ARRAY_SUPPORT||o.TYPED_ARRAY_SUPPORT,b.poolSize=8192,b._augment=function(t){return t.__proto__=b.prototype,t},b.from=function(t,e,r){return w(null,t,e,r)},b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array),b.alloc=function(t,e,r){return function(t,e,r,n){return _(e),e<=0?m(t,e):void 0!==r?"string"==typeof n?m(t,e).fill(r,n):m(t,e).fill(r):m(t,e)}(null,t,e,r)},b.allocUnsafe=function(t){return j(null,t)},b.allocUnsafeSlow=function(t){return j(null,t)},b.isBuffer=function(t){return null!=t&&(!!t._isBuffer||rt(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&rt(t.slice(0,0))}(t))},b.compare=function(t,e){if(!E(t)||!E(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},b.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(t,e){if(!g(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return b.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=b.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var i=t[r];if(!E(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},b.byteLength=C,b.prototype._isBuffer=!0,b.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)x(this,e,e+1);return this},b.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)x(this,e,e+3),x(this,e+1,e+2);return this},b.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)x(this,e,e+7),x(this,e+1,e+6),x(this,e+2,e+5),x(this,e+3,e+4);return this},b.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?z(this,0,t):O.apply(this,arguments)},b.prototype.equals=function(t){if(!E(t))throw new TypeError("Argument must be a Buffer");return this===t||0===b.compare(this,t)},b.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},b.prototype.compare=function(t,e,r,n,o){if(!E(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(i,a),u=this.slice(n,o),c=t.slice(e,r),l=0;l<s;++l)if(u[l]!==c[l]){i=u[l],a=c[l];break}return i<a?-1:a<i?1:0},b.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},b.prototype.indexOf=function(t,e,r){return P(this,t,e,r,!0)},b.prototype.lastIndexOf=function(t,e,r){return P(this,t,e,r,!1)},b.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return k(this,t,e,r);case"utf8":case"utf-8":return U(this,t,e,r);case"ascii":return I(this,t,e,r);case"latin1":case"binary":return T(this,t,e,r);case"base64":return $(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function L(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function q(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function Y(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=H(t[i]);return o}function N(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function F(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function V(t,e,r,n,o,i){if(!E(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function J(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function G(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function Z(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function W(t,e,r,n,o){return o||Z(t,0,r,4),p(t,e,r,n,23,4),r+4}function X(t,e,r,n,o){return o||Z(t,0,r,8),p(t,e,r,n,52,8),r+8}b.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),b.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=b.prototype;else{var o=e-t;r=new b(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},b.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||F(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},b.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||F(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},b.prototype.readUInt8=function(t,e){return e||F(t,1,this.length),this[t]},b.prototype.readUInt16LE=function(t,e){return e||F(t,2,this.length),this[t]|this[t+1]<<8},b.prototype.readUInt16BE=function(t,e){return e||F(t,2,this.length),this[t]<<8|this[t+1]},b.prototype.readUInt32LE=function(t,e){return e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},b.prototype.readUInt32BE=function(t,e){return e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},b.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||F(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},b.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||F(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},b.prototype.readInt8=function(t,e){return e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},b.prototype.readInt16LE=function(t,e){e||F(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},b.prototype.readInt16BE=function(t,e){e||F(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},b.prototype.readInt32LE=function(t,e){return e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},b.prototype.readInt32BE=function(t,e){return e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},b.prototype.readFloatLE=function(t,e){return e||F(t,4,this.length),h(this,t,!0,23,4)},b.prototype.readFloatBE=function(t,e){return e||F(t,4,this.length),h(this,t,!1,23,4)},b.prototype.readDoubleLE=function(t,e){return e||F(t,8,this.length),h(this,t,!0,52,8)},b.prototype.readDoubleBE=function(t,e){return e||F(t,8,this.length),h(this,t,!1,52,8)},b.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||V(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},b.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||V(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},b.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||V(this,t,e,1,255,0),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},b.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||V(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):J(this,t,e,!0),e+2},b.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||V(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):J(this,t,e,!1),e+2},b.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||V(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):G(this,t,e,!0),e+4},b.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||V(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):G(this,t,e,!1),e+4},b.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);V(this,t,e,r,o-1,-o)}var i=0,a=1,s=0;for(this[e]=255&t;++i<r&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+r},b.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);V(this,t,e,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+r},b.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||V(this,t,e,1,127,-128),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},b.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||V(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):J(this,t,e,!0),e+2},b.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||V(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):J(this,t,e,!1),e+2},b.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||V(this,t,e,4,2147483647,-2147483648),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):G(this,t,e,!0),e+4},b.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||V(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):G(this,t,e,!1),e+4},b.prototype.writeFloatLE=function(t,e,r){return W(this,t,e,!0,r)},b.prototype.writeFloatBE=function(t,e,r){return W(this,t,e,!1,r)},b.prototype.writeDoubleLE=function(t,e,r){return X(this,t,e,!0,r)},b.prototype.writeDoubleBE=function(t,e,r){return X(this,t,e,!1,r)},b.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!b.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},b.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!b.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var a=E(t)?t:Q(new b(t,n).toString()),s=a.length;for(i=0;i<r-e;++i)this[i+e]=a[i%s]}return this};var K=/[^+\/0-9A-Za-z-_]/g;function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function Q(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function tt(t){return function(t){var e,r,n,o,i,l;u||c();var f=t.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i="="===t[f-2]?2:"="===t[f-1]?1:0,l=new s(3*f/4-i),n=i>0?f-4:f;var h=0;for(e=0,r=0;e<n;e+=4,r+=3)o=a[t.charCodeAt(e)]<<18|a[t.charCodeAt(e+1)]<<12|a[t.charCodeAt(e+2)]<<6|a[t.charCodeAt(e+3)],l[h++]=o>>16&255,l[h++]=o>>8&255,l[h++]=255&o;return 2===i?(o=a[t.charCodeAt(e)]<<2|a[t.charCodeAt(e+1)]>>4,l[h++]=255&o):1===i&&(o=a[t.charCodeAt(e)]<<10|a[t.charCodeAt(e+1)]<<4|a[t.charCodeAt(e+2)]>>2,l[h++]=o>>8&255,l[h++]=255&o),l}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(K,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function et(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function rt(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var nt="object"==typeof o&&o&&o.Object===Object&&o;function ot(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})})),e}function it(t){var e={exports:{}};return t(e,e.exports),e.exports}module.exports=nt;var at=ot(Object.freeze({__proto__:null})),st="object"==typeof self&&self&&self.Object===Object&&self,ut=at||st||Function("return this")(),ct=ut.Symbol,lt=Object.prototype,ft=lt.hasOwnProperty,ht=lt.toString,pt=ct?ct.toStringTag:void 0;var dt=function(t){var e=ft.call(t,pt),r=t[pt];try{t[pt]=void 0;var n=!0}catch(t){}var o=ht.call(t);return n&&(e?t[pt]=r:delete t[pt]),o},gt=Object.prototype.toString;var yt=function(t){return gt.call(t)},vt=ct?ct.toStringTag:void 0;var mt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":vt&&vt in Object(t)?dt(t):yt(t)};var bt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var wt,_t=function(t){if(!bt(t))return!1;var e=mt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},jt=ut["__core-js_shared__"],At=(wt=/[^.]+$/.exec(jt&&jt.keys&&jt.keys.IE_PROTO||""))?"Symbol(src)_1."+wt:"";var St=function(t){return!!At&&At in t},Et=Function.prototype.toString;var Ct=function(t){if(null!=t){try{return Et.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Ot=/^\[object .+?Constructor\]$/,xt=Function.prototype,Pt=Object.prototype,Rt=xt.toString,kt=Pt.hasOwnProperty,Ut=RegExp("^"+Rt.call(kt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var It=function(t){return!(!bt(t)||St(t))&&(_t(t)?Ut:Ot).test(Ct(t))};var Tt=function(t,e){return null==t?void 0:t[e]};var $t=function(t,e){var r=Tt(t,e);return It(r)?r:void 0},Dt=function(){try{var t=$t(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Bt=function(t,e,r){"__proto__"==e&&Dt?Dt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var zt=function(t,e){return t===e||t!=t&&e!=e},Mt=Object.prototype.hasOwnProperty;var Lt=function(t,e,r){var n=t[e];Mt.call(t,e)&&zt(n,r)&&(void 0!==r||e in t)||Bt(t,e,r)},qt=Array.isArray;var Yt=function(t){return null!=t&&"object"==typeof t};var Nt=function(t){return"symbol"==typeof t||Yt(t)&&"[object Symbol]"==mt(t)},Ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vt=/^\w*$/;var Jt=function(t,e){if(qt(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Nt(t))||(Vt.test(t)||!Ft.test(t)||null!=e&&t in Object(e))},Gt=$t(Object,"create");var Zt=function(){this.__data__=Gt?Gt(null):{},this.size=0};var Wt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Xt=Object.prototype.hasOwnProperty;var Kt=function(t){var e=this.__data__;if(Gt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Xt.call(e,t)?e[t]:void 0},Ht=Object.prototype.hasOwnProperty;var Qt=function(t){var e=this.__data__;return Gt?void 0!==e[t]:Ht.call(e,t)};var te=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Gt&&void 0===e?"__lodash_hash_undefined__":e,this};function ee(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ee.prototype.clear=Zt,ee.prototype.delete=Wt,ee.prototype.get=Kt,ee.prototype.has=Qt,ee.prototype.set=te;var re=ee;var ne=function(){this.__data__=[],this.size=0};var oe=function(t,e){for(var r=t.length;r--;)if(zt(t[r][0],e))return r;return-1},ie=Array.prototype.splice;var ae=function(t){var e=this.__data__,r=oe(e,t);return!(r<0)&&(r==e.length-1?e.pop():ie.call(e,r,1),--this.size,!0)};var se=function(t){var e=this.__data__,r=oe(e,t);return r<0?void 0:e[r][1]};var ue=function(t){return oe(this.__data__,t)>-1};var ce=function(t,e){var r=this.__data__,n=oe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function le(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}le.prototype.clear=ne,le.prototype.delete=ae,le.prototype.get=se,le.prototype.has=ue,le.prototype.set=ce;var fe=le,he=$t(ut,"Map");var pe=function(){this.size=0,this.__data__={hash:new re,map:new(he||fe),string:new re}};var de=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var ge=function(t,e){var r=t.__data__;return de(e)?r["string"==typeof e?"string":"hash"]:r.map};var ye=function(t){var e=ge(this,t).delete(t);return this.size-=e?1:0,e};var ve=function(t){return ge(this,t).get(t)};var me=function(t){return ge(this,t).has(t)};var be=function(t,e){var r=ge(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function we(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}we.prototype.clear=pe,we.prototype.delete=ye,we.prototype.get=ve,we.prototype.has=me,we.prototype.set=be;var _e=we;function je(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(je.Cache||_e),r}je.Cache=_e;var Ae=je;var Se=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ee=/\\(\\)?/g,Ce=function(t){var e=Ae(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Se,(function(t,r,n,o){e.push(n?o.replace(Ee,"$1"):r||t)})),e}));var Oe=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},xe=ct?ct.prototype:void 0,Pe=xe?xe.toString:void 0;var Re=function t(e){if("string"==typeof e)return e;if(qt(e))return Oe(e,t)+"";if(Nt(e))return Pe?Pe.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r};var ke=function(t){return null==t?"":Re(t)};var Ue=function(t,e){return qt(t)?t:Jt(t,e)?[t]:Ce(ke(t))},Ie=/^(?:0|[1-9]\d*)$/;var Te=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Ie.test(t))&&t>-1&&t%1==0&&t<e};var $e=function(t){if("string"==typeof t||Nt(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var De=function(t,e,r,n){if(!bt(t))return t;for(var o=-1,i=(e=Ue(e,t)).length,a=i-1,s=t;null!=s&&++o<i;){var u=$e(e[o]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=a){var l=s[u];void 0===(c=n?n(l,u,s):void 0)&&(c=bt(l)?l:Te(e[o+1])?[]:{})}Lt(s,u,c),s=s[u]}return t};var Be=function(t,e,r){return null==t?t:De(t,e,r)};var ze=function(t,e){for(var r=0,n=(e=Ue(e,t)).length;null!=t&&r<n;)t=t[$e(e[r++])];return r&&r==n?t:void 0};var Me=function(t,e,r){var n=null==t?void 0:ze(t,e);return void 0===n?r:n};var Le=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var qe=function(t){return this.__data__.has(t)};function Ye(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new _e;++e<r;)this.add(t[e])}Ye.prototype.add=Ye.prototype.push=Le,Ye.prototype.has=qe;var Ne=Ye;var Fe=function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1};var Ve=function(t){return t!=t};var Je=function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1};var Ge=function(t,e,r){return e==e?Je(t,e,r):Fe(t,Ve,r)};var Ze=function(t,e){return!!(null==t?0:t.length)&&Ge(t,e,0)>-1};var We=function(t,e,r){for(var n=-1,o=null==t?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1};var Xe=function(t,e){return t.has(e)},Ke=$t(ut,"Set");var He=function(){};var Qe=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},tr=Ke&&1/Qe(new Ke([,-0]))[1]==1/0?function(t){return new Ke(t)}:He;var er=function(t,e,r){var n=-1,o=Ze,i=t.length,a=!0,s=[],u=s;if(r)a=!1,o=We;else if(i>=200){var c=e?null:tr(t);if(c)return Qe(c);a=!1,o=Xe,u=new Ne}else u=e?[]:s;t:for(;++n<i;){var l=t[n],f=e?e(l):l;if(l=r||0!==l?l:0,a&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),s.push(l)}else o(u,f,r)||(u!==s&&u.push(f),s.push(l))}return s};var rr=function(t){return t&&t.length?er(t):[]};var nr=function(){this.__data__=new fe,this.size=0};var or=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var ir=function(t){return this.__data__.get(t)};var ar=function(t){return this.__data__.has(t)};var sr=function(t,e){var r=this.__data__;if(r instanceof fe){var n=r.__data__;if(!he||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new _e(n)}return r.set(t,e),this.size=r.size,this};function ur(t){var e=this.__data__=new fe(t);this.size=e.size}ur.prototype.clear=nr,ur.prototype.delete=or,ur.prototype.get=ir,ur.prototype.has=ar,ur.prototype.set=sr;var cr=ur;var lr=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1};var fr=function(t,e,r,n,o,i){var a=1&r,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=i.get(t),l=i.get(e);if(c&&l)return c==e&&l==t;var f=-1,h=!0,p=2&r?new Ne:void 0;for(i.set(t,e),i.set(e,t);++f<s;){var d=t[f],g=e[f];if(n)var y=a?n(g,d,f,e,t,i):n(d,g,f,t,e,i);if(void 0!==y){if(y)continue;h=!1;break}if(p){if(!lr(e,(function(t,e){if(!Xe(p,e)&&(d===t||o(d,t,r,n,i)))return p.push(e)}))){h=!1;break}}else if(d!==g&&!o(d,g,r,n,i)){h=!1;break}}return i.delete(t),i.delete(e),h},hr=ut.Uint8Array;var pr=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r},dr=ct?ct.prototype:void 0,gr=dr?dr.valueOf:void 0;var yr=function(t,e,r,n,o,i,a){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new hr(t),new hr(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return zt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=pr;case"[object Set]":var u=1&n;if(s||(s=Qe),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;n|=2,a.set(t,e);var l=fr(s(t),s(e),n,o,i,a);return a.delete(t),l;case"[object Symbol]":if(gr)return gr.call(t)==gr.call(e)}return!1};var vr=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t};var mr=function(t,e,r){var n=e(t);return qt(t)?n:vr(n,r(t))};var br=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i};var wr=function(){return[]},_r=Object.prototype.propertyIsEnumerable,jr=Object.getOwnPropertySymbols,Ar=jr?function(t){return null==t?[]:(t=Object(t),br(jr(t),(function(e){return _r.call(t,e)})))}:wr;var Sr=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var Er=function(t){return Yt(t)&&"[object Arguments]"==mt(t)},Cr=Object.prototype,Or=Cr.hasOwnProperty,xr=Cr.propertyIsEnumerable,Pr=Er(function(){return arguments}())?Er:function(t){return Yt(t)&&Or.call(t,"callee")&&!xr.call(t,"callee")};var Rr=function(){return!1},kr=it((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?ut.Buffer:void 0,i=(o?o.isBuffer:void 0)||Rr;t.exports=i}));var Ur=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Ir={};Ir["[object Float32Array]"]=Ir["[object Float64Array]"]=Ir["[object Int8Array]"]=Ir["[object Int16Array]"]=Ir["[object Int32Array]"]=Ir["[object Uint8Array]"]=Ir["[object Uint8ClampedArray]"]=Ir["[object Uint16Array]"]=Ir["[object Uint32Array]"]=!0,Ir["[object Arguments]"]=Ir["[object Array]"]=Ir["[object ArrayBuffer]"]=Ir["[object Boolean]"]=Ir["[object DataView]"]=Ir["[object Date]"]=Ir["[object Error]"]=Ir["[object Function]"]=Ir["[object Map]"]=Ir["[object Number]"]=Ir["[object Object]"]=Ir["[object RegExp]"]=Ir["[object Set]"]=Ir["[object String]"]=Ir["[object WeakMap]"]=!1;var Tr=function(t){return Yt(t)&&Ur(t.length)&&!!Ir[mt(t)]};var $r=function(t){return function(e){return t(e)}},Dr=it((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&at.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i})),Br=Dr&&Dr.isTypedArray,zr=Br?$r(Br):Tr,Mr=Object.prototype.hasOwnProperty;var Lr=function(t,e){var r=qt(t),n=!r&&Pr(t),o=!r&&!n&&kr(t),i=!r&&!n&&!o&&zr(t),a=r||n||o||i,s=a?Sr(t.length,String):[],u=s.length;for(var c in t)!e&&!Mr.call(t,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Te(c,u))||s.push(c);return s},qr=Object.prototype;var Yr=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||qr)};var Nr=function(t,e){return function(r){return t(e(r))}},Fr=Nr(Object.keys,Object),Vr=Object.prototype.hasOwnProperty;var Jr=function(t){if(!Yr(t))return Fr(t);var e=[];for(var r in Object(t))Vr.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Gr=function(t){return null!=t&&Ur(t.length)&&!_t(t)};var Zr=function(t){return Gr(t)?Lr(t):Jr(t)};var Wr=function(t){return mr(t,Zr,Ar)},Xr=Object.prototype.hasOwnProperty;var Kr=function(t,e,r,n,o,i){var a=1&r,s=Wr(t),u=s.length;if(u!=Wr(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:Xr.call(e,l)))return!1}var f=i.get(t),h=i.get(e);if(f&&h)return f==e&&h==t;var p=!0;i.set(t,e),i.set(e,t);for(var d=a;++c<u;){var g=t[l=s[c]],y=e[l];if(n)var v=a?n(y,g,l,e,t,i):n(g,y,l,t,e,i);if(!(void 0===v?g===y||o(g,y,r,n,i):v)){p=!1;break}d||(d="constructor"==l)}if(p&&!d){var m=t.constructor,b=e.constructor;m==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(t),i.delete(e),p},Hr=$t(ut,"DataView"),Qr=$t(ut,"Promise"),tn=$t(ut,"WeakMap"),en="[object Map]",rn="[object Promise]",nn="[object Set]",on="[object WeakMap]",an="[object DataView]",sn=Ct(Hr),un=Ct(he),cn=Ct(Qr),ln=Ct(Ke),fn=Ct(tn),hn=mt;(Hr&&hn(new Hr(new ArrayBuffer(1)))!=an||he&&hn(new he)!=en||Qr&&hn(Qr.resolve())!=rn||Ke&&hn(new Ke)!=nn||tn&&hn(new tn)!=on)&&(hn=function(t){var e=mt(t),r="[object Object]"==e?t.constructor:void 0,n=r?Ct(r):"";if(n)switch(n){case sn:return an;case un:return en;case cn:return rn;case ln:return nn;case fn:return on}return e});var pn=hn,dn="[object Arguments]",gn="[object Array]",yn="[object Object]",vn=Object.prototype.hasOwnProperty;var mn=function(t,e,r,n,o,i){var a=qt(t),s=qt(e),u=a?gn:pn(t),c=s?gn:pn(e),l=(u=u==dn?yn:u)==yn,f=(c=c==dn?yn:c)==yn,h=u==c;if(h&&kr(t)){if(!kr(e))return!1;a=!0,l=!1}if(h&&!l)return i||(i=new cr),a||zr(t)?fr(t,e,r,n,o,i):yr(t,e,u,r,n,o,i);if(!(1&r)){var p=l&&vn.call(t,"__wrapped__"),d=f&&vn.call(e,"__wrapped__");if(p||d){var g=p?t.value():t,y=d?e.value():e;return i||(i=new cr),o(g,y,r,n,i)}}return!!h&&(i||(i=new cr),Kr(t,e,r,n,o,i))};var bn=function t(e,r,n,o,i){return e===r||(null==e||null==r||!Yt(e)&&!Yt(r)?e!=e&&r!=r:mn(e,r,n,o,t,i))};var wn=function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var s=r[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<i;){var u=(s=r[o])[0],c=t[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var f=new cr;if(n)var h=n(c,l,u,t,e,f);if(!(void 0===h?bn(l,c,3,n,f):h))return!1}}return!0};var _n=function(t){return t==t&&!bt(t)};var jn=function(t){for(var e=Zr(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,_n(o)]}return e};var An=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}};var Sn=function(t){var e=jn(t);return 1==e.length&&e[0][2]?An(e[0][0],e[0][1]):function(r){return r===t||wn(r,t,e)}};var En=function(t,e){return null!=t&&e in Object(t)};var Cn=function(t,e,r){for(var n=-1,o=(e=Ue(e,t)).length,i=!1;++n<o;){var a=$e(e[n]);if(!(i=null!=t&&r(t,a)))break;t=t[a]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&Ur(o)&&Te(a,o)&&(qt(t)||Pr(t))};var On=function(t,e){return null!=t&&Cn(t,e,En)};var xn=function(t,e){return Jt(t)&&_n(e)?An($e(t),e):function(r){var n=Me(r,t);return void 0===n&&n===e?On(r,t):bn(e,n,3)}};var Pn=function(t){return t};var Rn=function(t){return function(e){return null==e?void 0:e[t]}};var kn=function(t){return function(e){return ze(e,t)}};var Un=function(t){return Jt(t)?Rn($e(t)):kn(t)};var In=function(t){return"function"==typeof t?t:null==t?Pn:"object"==typeof t?qt(t)?xn(t[0],t[1]):Sn(t):Un(t)};var Tn=function(t){return function(e,r,n){var o=Object(e);if(!Gr(e)){var i=In(r);e=Zr(e),r=function(t){return i(o[t],t,o)}}var a=t(e,r,n);return a>-1?o[i?e[a]:a]:void 0}},$n=/\s/;var Dn=function(t){for(var e=t.length;e--&&$n.test(t.charAt(e)););return e},Bn=/^\s+/;var zn=function(t){return t?t.slice(0,Dn(t)+1).replace(Bn,""):t},Mn=/^[-+]0x[0-9a-f]+$/i,Ln=/^0b[01]+$/i,qn=/^0o[0-7]+$/i,Yn=parseInt;var Nn=function(t){if("number"==typeof t)return t;if(Nt(t))return NaN;if(bt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=bt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=zn(t);var r=Ln.test(t);return r||qn.test(t)?Yn(t.slice(2),r?2:8):Mn.test(t)?NaN:+t},Fn=1/0;var Vn=function(t){return t?(t=Nn(t))===Fn||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var Jn=function(t){var e=Vn(t),r=e%1;return e==e?r?e-r:e:0},Gn=Math.max;var Zn=Tn((function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=null==r?0:Jn(r);return o<0&&(o=Gn(n+o,0)),Fe(t,In(e),o)}));var Wn=function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i};var Xn=function(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:Wn(t,e,r)},Kn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Hn=function(t){return Kn.test(t)};var Qn=function(t){return t.split("")},to="[\\ud800-\\udfff]",eo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ro="\\ud83c[\\udffb-\\udfff]",no="[^\\ud800-\\udfff]",oo="(?:\\ud83c[\\udde6-\\uddff]){2}",io="[\\ud800-\\udbff][\\udc00-\\udfff]",ao="(?:"+eo+"|"+ro+")"+"?",so="[\\ufe0e\\ufe0f]?",uo=so+ao+("(?:\\u200d(?:"+[no,oo,io].join("|")+")"+so+ao+")*"),co="(?:"+[no+eo+"?",eo,oo,io,to].join("|")+")",lo=RegExp(ro+"(?="+ro+")|"+co+uo,"g");var fo=function(t){return t.match(lo)||[]};var ho=function(t){return Hn(t)?fo(t):Qn(t)};var po=function(t){return function(e){e=ke(e);var r=Hn(e)?ho(e):void 0,n=r?r[0]:e.charAt(0),o=r?Xn(r,1).join(""):e.slice(1);return n[t]()+o}}("toUpperCase");var go=function(t){return po(ke(t).toLowerCase())};var yo=function(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r};var vo=function(t){return function(e){return null==t?void 0:t[e]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),mo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bo=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var wo=function(t){return(t=ke(t))&&t.replace(mo,vo).replace(bo,"")},_o=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var jo=function(t){return t.match(_o)||[]},Ao=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var So=function(t){return Ao.test(t)},Eo="\\u2700-\\u27bf",Co="a-z\\xdf-\\xf6\\xf8-\\xff",Oo="A-Z\\xc0-\\xd6\\xd8-\\xde",xo="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Po="["+xo+"]",Ro="\\d+",ko="[\\u2700-\\u27bf]",Uo="["+Co+"]",Io="[^\\ud800-\\udfff"+xo+Ro+Eo+Co+Oo+"]",To="(?:\\ud83c[\\udde6-\\uddff]){2}",$o="[\\ud800-\\udbff][\\udc00-\\udfff]",Do="["+Oo+"]",Bo="(?:"+Uo+"|"+Io+")",zo="(?:"+Do+"|"+Io+")",Mo="(?:['’](?:d|ll|m|re|s|t|ve))?",Lo="(?:['’](?:D|LL|M|RE|S|T|VE))?",qo="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Yo="[\\ufe0e\\ufe0f]?",No=Yo+qo+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",To,$o].join("|")+")"+Yo+qo+")*"),Fo="(?:"+[ko,To,$o].join("|")+")"+No,Vo=RegExp([Do+"?"+Uo+"+"+Mo+"(?="+[Po,Do,"$"].join("|")+")",zo+"+"+Lo+"(?="+[Po,Do+Bo,"$"].join("|")+")",Do+"?"+Bo+"+"+Mo,Do+"+"+Lo,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ro,Fo].join("|"),"g");var Jo=function(t){return t.match(Vo)||[]};var Go=function(t,e,r){return t=ke(t),void 0===(e=r?void 0:e)?So(t)?Jo(t):jo(t):t.match(e)||[]},Zo=RegExp("['’]","g");var Wo=function(t){return function(e){return yo(Go(wo(e).replace(Zo,"")),t,"")}},Xo=Wo((function(t,e,r){return e=e.toLowerCase(),t+(r?go(e):e)})),Ko=Wo((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));var Ho=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t};var Qo=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var s=e[i],u=n?n(r[s],t[s],s,r,t):void 0;void 0===u&&(u=t[s]),o?Bt(r,s,u):Lt(r,s,u)}return r};var ti=function(t,e){return t&&Qo(e,Zr(e),t)};var ei=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},ri=Object.prototype.hasOwnProperty;var ni=function(t){if(!bt(t))return ei(t);var e=Yr(t),r=[];for(var n in t)("constructor"!=n||!e&&ri.call(t,n))&&r.push(n);return r};var oi=function(t){return Gr(t)?Lr(t,!0):ni(t)};var ii=function(t,e){return t&&Qo(e,oi(e),t)},ai=it((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?ut.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=i?i(r):new t.constructor(r);return t.copy(n),n}}));var si=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var ui=function(t,e){return Qo(t,Ar(t),e)},ci=Nr(Object.getPrototypeOf,Object),li=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)vr(e,Ar(t)),t=ci(t);return e}:wr;var fi=function(t,e){return Qo(t,li(t),e)};var hi=function(t){return mr(t,oi,li)},pi=Object.prototype.hasOwnProperty;var di=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&pi.call(t,"index")&&(r.index=t.index,r.input=t.input),r};var gi=function(t){var e=new t.constructor(t.byteLength);return new hr(e).set(new hr(t)),e};var yi=function(t,e){var r=e?gi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},vi=/\w*$/;var mi=function(t){var e=new t.constructor(t.source,vi.exec(t));return e.lastIndex=t.lastIndex,e},bi=ct?ct.prototype:void 0,wi=bi?bi.valueOf:void 0;var _i=function(t){return wi?Object(wi.call(t)):{}};var ji=function(t,e){var r=e?gi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var Ai=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return gi(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return yi(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ji(t,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return mi(t);case"[object Set]":return new n;case"[object Symbol]":return _i(t)}},Si=Object.create,Ei=function(){function t(){}return function(e){if(!bt(e))return{};if(Si)return Si(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var Ci=function(t){return"function"!=typeof t.constructor||Yr(t)?{}:Ei(ci(t))};var Oi=function(t){return Yt(t)&&"[object Map]"==pn(t)},xi=Dr&&Dr.isMap,Pi=xi?$r(xi):Oi;var Ri=function(t){return Yt(t)&&"[object Set]"==pn(t)},ki=Dr&&Dr.isSet,Ui=ki?$r(ki):Ri,Ii="[object Arguments]",Ti="[object Function]",$i="[object Object]",Di={};Di[Ii]=Di["[object Array]"]=Di["[object ArrayBuffer]"]=Di["[object DataView]"]=Di["[object Boolean]"]=Di["[object Date]"]=Di["[object Float32Array]"]=Di["[object Float64Array]"]=Di["[object Int8Array]"]=Di["[object Int16Array]"]=Di["[object Int32Array]"]=Di["[object Map]"]=Di["[object Number]"]=Di[$i]=Di["[object RegExp]"]=Di["[object Set]"]=Di["[object String]"]=Di["[object Symbol]"]=Di["[object Uint8Array]"]=Di["[object Uint8ClampedArray]"]=Di["[object Uint16Array]"]=Di["[object Uint32Array]"]=!0,Di["[object Error]"]=Di[Ti]=Di["[object WeakMap]"]=!1;var Bi=function t(e,r,n,o,i,a){var s,u=1&r,c=2&r,l=4&r;if(n&&(s=i?n(e,o,i,a):n(e)),void 0!==s)return s;if(!bt(e))return e;var f=qt(e);if(f){if(s=di(e),!u)return si(e,s)}else{var h=pn(e),p=h==Ti||"[object GeneratorFunction]"==h;if(kr(e))return ai(e,u);if(h==$i||h==Ii||p&&!i){if(s=c||p?{}:Ci(e),!u)return c?fi(e,ii(s,e)):ui(e,ti(s,e))}else{if(!Di[h])return i?e:{};s=Ai(e,h,u)}}a||(a=new cr);var d=a.get(e);if(d)return d;a.set(e,s),Ui(e)?e.forEach((function(o){s.add(t(o,r,n,o,e,a))})):Pi(e)&&e.forEach((function(o,i){s.set(i,t(o,r,n,i,e,a))}));var g=f?void 0:(l?c?hi:Wr:c?oi:Zr)(e);return Ho(g||e,(function(o,i){g&&(o=e[i=o]),Lt(s,i,t(o,r,n,i,e,a))})),s};var zi=function(t){return Bi(t,5)};let Mi={};function Li(t,e,n={}){if(!e||"object"!=typeof e)return t;if(!t||"object"!=typeof t)return t;return r.mergeAdvanced(t,e,{arrayMerge:function(t,e,r){const n=t.slice();return e.forEach(((e,o)=>{void 0===n[o]?n[o]=r.cloneUnlessOtherwiseSpecified(e,r):r.isMergeableObject(e)?n[o]=Li(t[o],e,r):-1===t.indexOf(e)&&n.push(e)})),n}})}function qi(t){return t&&"object"==typeof t&&!(t instanceof Array)}function Yi(t){if(!t)return;const e=JSON.parse(JSON.stringify(t));return n.normalizeKeys(e,Vi)}function Ni(t){if(!t)return;const e=JSON.parse(JSON.stringify(t));return n.normalizeKeys(e,Fi)}function Fi(t){return("$"===t[0]?"$":"")+Ko(t).replace(/\_([0-9])/g,"$1")}function Vi(t){return("$"===t[0]?"$":"")+Xo(t).replace(/\_([0-9])/g,"$1")}function Ji(t){return"string"==typeof t?t.replace(/^[/]+/,""):""}function Gi(t){return"string"==typeof t?t.replace(/[/]+$/,""):""}function Zi(t){return e.stringify(t,{depth:10,encode:!1})}function Wi(t,e,r){return t instanceof Array?t.reduce(e,r):r}function Xi(){return!("undefined"!=typeof window&&window&&window.document)}function Ki(t){return"function"==typeof t}function Hi(t,e,r){return{list:r.indexOf("list")>=0?function(r){return t("get",e,void 0,r)}:void 0,get:r.indexOf("get")>=0?function(r,n){return t("get",e,r,n)}:void 0}}async function Qi(t,e,r,n){const o=Mi.vaultUrl,i=Mi.timeout,a=`swell_vault_response_${window.__swell_vault_request_id=window.__swell_vault_request_id||0,window.__swell_vault_request_id++,window.__swell_vault_request_id}`;return r={$jsonp:{method:t,callback:a},$data:r,$key:Mi.key},new Promise(((t,n)=>{const s=document.createElement("script");s.type="text/javascript",s.src=`${Gi(o)}/${Ji(e)}?${function(t){const e=[],r=function(t,r){"function"==typeof r?r=r():null==r&&(r=""),e[e.length]=encodeURIComponent(t)+"="+encodeURIComponent(r)};for(const e in t)ea(e,t[e],r);return e.join("&").replace(" ","+")}(r)}`;const u=setTimeout((()=>{window[a]({$error:`Request timed out after ${i/1e3} seconds`,$status:500})}),i);window[a]=e=>{if(clearTimeout(u),e&&e.$error){const t=new Error(e.$error);t.code="request_error",t.status=e.$status,n(t)}else if(!e||e.$status>=300){const t=new Error("A connection error occurred while making the request");t.code="connection_error",t.status=e.$status,n(t)}else t(Mi.useCamelCase?Yi(e.$data):e.$data);delete window[a],s.parentNode.removeChild(s)},document.getElementsByTagName("head")[0].appendChild(s)}))}const ta=/\[\]$/;function ea(t,e,r){let n;if(e instanceof Array)for(let n=0;n<e.length;n++)ta.test(t)?r(t,v):ea(t+"["+("object"==typeof v&&null!=v?n:"")+"]",v,r);else if(e&&"object"==typeof e)for(n in e)ea(t+"["+n+"]",e[n],r);else r(t,e)}const ra={async createToken(t){let e=null,r=null,n=null;t||(e="Card details are missing in `swell.card.createToken(card)`",n="");const o=Ni(t);if(!o.nonce){if(this.validateNumber(o.number)||(e="Card number appears to be invalid",r="invalid_card_number",n="number"),o.exp){const t=this.expiry(o.exp);o.exp_month=t.month,o.exp_year=t.year}this.validateExpiry(o.exp_month,o.exp_year)||(e="Card expiry appears to be invalid",r="invalid_card_expiry",n="exp_month"),this.validateCVC(o.cvc)||(e="Card CVC code appears to be invalid",r="invalid_card_cvc",n="exp_cvc")}if(e){const t=new Error(e);throw t.code=r||"invalid_card",t.status=402,t.param=n,t}const i=await Qi("post","/tokens",o);if(i.errors){const t=Object.keys(i.errors)[0],e=new Error(i.errors[t].message||"Unknown error");throw e.code="vault_error",e.status=402,e.param=t,e}return i},expiry(t){if(t&&t.month&&t.year)return t;const e=new String(t).split(/[\s\/\-]+/,2),r=e[0];let n=e[1];if(n&&2===n.length&&/^\d+$/.test(n)){n=(new Date).getFullYear().toString().substring(0,2)+n}return{month:~~r,year:~~n}},types(){let t,e,r,n;for(e={},t=r=40;r<=49;t=++r)e[t]="Visa";for(t=n=50;n<=59;t=++n)e[t]="MasterCard";return e[34]=e[37]="American Express",e[60]=e[62]=e[64]=e[65]="Discover",e[35]="JCB",e[30]=e[36]=e[38]=e[39]="Diners Club",e},type(t){return this.types()[t.slice(0,2)]||"Unknown"},luhnCheck(t){let e,r,n,o,i,a;for(n=!0,o=0,r=(t+"").split("").reverse(),i=0,a=r.length;i<a;i++)e=r[i],e=parseInt(e,10),(n=!n)&&(e*=2),e>9&&(e-=9),o+=e;return o%10==0},validateNumber(t){return(t=(t+"").replace(/\s+|-/g,"")).length>=10&&t.length<=16&&this.luhnCheck(t)},validateExpiry(t,e){let r,n;return t=String(t).trim(),e=String(e).trim(),!!/^\d+$/.test(t)&&(!!/^\d+$/.test(e)&&(parseInt(t,10)<=12&&(n=new Date(e,t),r=new Date,n.setMonth(n.getMonth()-1),n.setMonth(n.getMonth()+1,1),n>r)))},validateCVC:t=>(t=String(t).trim(),/^\d+$/.test(t)&&t.length>=3&&t.length<=4)};function na(t){if(Xi())return;const e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function oa(t,e,r={}){if(Xi())return;const n=new Date;n.setDate(n.getDate()+7),(r={path:"/",expires:n.toUTCString(),...r}).expires&&r.expires.toUTCString&&(r.expires=r.expires.toUTCString());let o=encodeURIComponent(t)+"="+encodeURIComponent(e);for(const t in r){o+="; "+t;const e=r[t];!0!==e&&(o+="="+e)}document.cookie=o}let ia={};const aa={values({model:t,id:e},r){if(void 0===r)return Me(ia,`${t}.${e}`,{});for(let n in r)Be(ia,`${t}.${e}.${n}`,r[n])},preset(t){const{presets:e=[]}=this.values(t);e.push(t),this.values(t,{presets:e})},set(t){let{model:e,id:r,path:n,value:o}=t,{data:i={},record:a,presets:s}=this.values(t);if(null===r)return;if(void 0===a)return this.preset(t);i=Li(a||{},i);const{useCamelCase:u}=Mi;if(u&&o&&"object"==typeof o&&(o=Yi(o)),n||o instanceof Array){let t={...i||{}},e=u?"string"==typeof(c=n)?c.split(".").map(Xo).join("."):c:n;Be(t,e||"",o),i=t}else o&&"object"==typeof o?(i=i||{},i=Li(i,o)):i=o;var c;this.values(t,{data:i}),void 0!==ia[e][r]&&(ia[e][r]=JSON.parse(JSON.stringify(ia[e][r])))},get(t,e){const{data:r,recordTimer:n}=this.values({model:t,id:e});if(n)return r},setRecord(t,e){let{recordTimer:r,presets:n}=this.values(e);if(r&&clearTimeout(r),r=setTimeout((()=>{this.values(e,{record:void 0,recordTimer:void 0})}),5e3),this.values(e,{record:t,recordTimer:r}),n){for(let t of n)this.set(t);this.values(e,{presets:void 0})}const o=this.get(e.model,e.id);return void 0!==o?o:t},async getFetch(t,e,r){const n=this.get(t,e);if(void 0!==n)return n;const o=await r();return this.setRecord(o,{model:t,id:e})},clear(t,e){t?Be(ia,e?`${t}.${e}`:t,void 0):ia={}}};let sa;function ua(t){let e=t||[];if(t&&"object"==typeof t&&!(t instanceof Array)){e=[];for(const r in t)e.push({id:r,value:t[r]})}return e instanceof Array?e.map((t=>({id:t.id||t.name,value:t.value}))):e}function ca(t,e){const r=sa.useCamelCase?Ni(t):t,n={...r,price:r.price||0,sale_price:r.sale_price,orig_price:r.orig_price,stock_status:r.stock_status};let o=0;const i=[],a=ua(e),s=function(t,e){return t.options?Wi(e?t.options.filter(e):t.options,((t,e)=>{const r=Wi(e.values,((t,e)=>({...t,[e.id]:{...e,id:e.id},[e.name]:{...e,id:e.id}})),{});return{...t,[e.id]:{...e,values:r},[e.name]:{...e,values:r}}}),{}):{}}(r);for(const t of a)s[t.id]&&s[t.id].values[t.value]&&(s[t.id].variant?i.push(s[t.id].values[t.value].id):o+=s[t.id].values[t.value].price||0);if(i.length>0){const t=function(t,e){if(e.length>0){const r=t.variants&&t.variants.results;if(r.length>0)for(const t of r){let r=!0;for(const n of e){const e=Ni(t);if(e.option_value_ids&&-1===e.option_value_ids.indexOf(n)){r=!1;break}}if(r)return t}}return null}(r,i);t&&(n.price=t.price||0,n.sale_price=t.sale_price||r.sale_price,n.orig_price=t.orig_price||r.orig_price,n.stock_status=t.stock_status||r.stock_status,n.images=t.images&&t.images.length?t.images:r.images)}return o>0&&(n.price+=o,n.sale_price&&(n.sale_price+=o),n.orig_price&&(n.orig_price+=o)),void 0===n.sale_price&&delete n.sale_price,void 0===n.orig_price&&delete n.orig_price,sa.useCamelCase?Yi(n):n}function la(t,e={}){const r=(e.attributes||void 0===e.attributes)&&ha(t),n=(e.categories||void 0===e.categories)&&fa(t),o=(e.price||void 0===e.price)&&pa(t);let i=[];return o&&i.push({id:"price",label:"Price",type:"range",options:[{value:o.min,label:o.min},{value:o.max,label:o.max}],interval:o.interval}),n&&n.length>0&&i.push({id:"category",label:"Category",type:"select",options:n.map((t=>({value:t.slug,label:t.name})))}),r&&r.length>0&&(i=[...i,...Wi(r,((t,e)=>[...t,..."category"!==e.id&&"price"!==e.id&&e.values instanceof Array&&e.values.length>0?[{id:e.id,label:e.name,type:"select",options:e.values.map((t=>({value:t,label:t})))}]:[]]),[])]),i}function fa(t){const e=[],r=t&&t.results||(t.id?[t]:t);if(r instanceof Array)for(let t of r)if(t.categories)for(let r of t.categories){if(!r)continue;Zn(e,{id:r.id})||e.push(r)}return e}function ha(t){const e=[],r=t&&t.results||(t.id?[t]:t);if(r instanceof Array)for(let t of r)if(t.attributes)for(let r in t.attributes){if(!t.attributes[r])continue;const n=t.attributes[r].value;let o=Zn(e,{id:r});o?o.values=rr([...o.values,...n instanceof Array?n:[n]]):e.push({...t.attributes[r],value:void 0,values:[...n instanceof Array?n:[n]]})}return e}function pa(t){let e,r,n;const o=t&&t.results||(t.id?[t]:t);if(o instanceof Array)for(let t of o)(void 0===r||t.price>r)&&(r=Math.ceil(t.price)),(void 0===e||t.price<e)&&(e=Math.floor(t.price));if(e===r)return null;for(n=Math.ceil((r-e)/10)||1,n>1e3?n=1e3:n>100?n=100:n>10&&(n=10),r%n>0&&(r=n+r-r%n),e%n>0&&(e-=e%n);(r-e)/n%1>0;)r++;return{min:e,max:r,interval:n}}function da(t,e){return{state:null,order:null,settings:null,requested:!1,pendingRequests:[],cacheClear:null,async requestStateChange(e,r,n,o){return this.requestStateSync((async()=>{const i=await t(e,r,n,o);return i&&i.errors||(this.state=i),i}))},async requestStateSync(t){if(this.state)return await t();if(this.requested)return new Promise((e=>{this.pendingRequests.push({handler:t,resolve:e})}));this.requested=!0;const e=await t();for(this.requested=!1;this.pendingRequests.length>0;){const{handler:t,resolve:e}=this.pendingRequests.shift();e(t())}return e},get(){let t;return this.cacheClear&&(this.cacheClear=null,t={$cache:!1}),this.requestStateChange("get","/cart",void 0,t)},clearCache(){this.cacheClear=!0},getItemData(t,e={}){let r=zi(t);return"string"==typeof t&&(r={...e||{},product_id:t}),r&&r.options&&(r.options=ua(r.options)),r},addItem(t,e){return this.requestStateChange("post","/cart/items",this.getItemData(t,e))},updateItem(t,e){return this.requestStateChange("put",`/cart/items/${t}`,this.getItemData(e))},setItems(t){let e=t;return e&&e.map&&(e=e.map(this.getItemData)),this.requestStateChange("put","/cart/items",e)},removeItem(t){return this.requestStateChange("delete",`/cart/items/${t}`)},recover(t){return this.requestStateChange("put",`/cart/recover/${t}`)},update(t){let e=t;return e.items&&e.items.map&&(e={...e,items:e.items.map(this.getItemData)}),this.requestStateChange("put","/cart",e)},applyCoupon(t){return this.requestStateChange("put","/cart/coupon",{code:t})},removeCoupon(){return this.requestStateChange("delete","/cart/coupon")},applyGiftcard(t){return this.requestStateChange("post","/cart/giftcards",{code:t})},removeGiftcard(t){return this.requestStateChange("delete",`/cart/giftcards/${t}`)},async getShippingRates(){return await this.requestStateChange("get","/cart/shipment-rating"),this.state[e.useCamelCase?"shipmentRating":"shipment_rating"]},async submitOrder(){const e=await t("post","/cart/order");return e.errors||(this.state=null,this.order=e),e},async getOrder(e){let r;return r=e?await t("get","/cart/order",{checkout_id:e}):await t("get","/cart/order"),this.order=r,r},async getSettings(){return this.settings=await t("get","/cart/settings"),this.settings}}}function ga(t,e){return{state:null,menuState:null,paymentState:null,sessionState:null,locale:null,localizedState:{},refresh(){return this.state=null,this.menuState=null,this.paymentState=null,this.sessionState=null,this.localizedState={},this.get()},getState(e,r,{id:n,def:o,refresh:i=!1}={}){return this[r]&&!i||(this[r]=t("get",e)),this[r]&&"function"==typeof this[r].then?this[r].then((t=>(this[r]=t,this.getLocalizedState(r,n,o)))):this.getLocalizedState(r,n,o)},getLocalizedState(t,r,n){this.locale||(this.locale=e.api.locale.selected());const o=this.localizedState;return o.code!==this.locale&&(o.code=this.locale,delete o[this.locale]),o[this.locale]||(o[this.locale]={}),o[this.locale][t]||(o[this.locale][t]=this.decodeLocale(this[t])),r?Me(o[this.locale][t],r,n):o[this.locale][t]},findState(t,e,{where:r,def:n}={}){const o=this.getState(t,e);return o&&"function"==typeof o.then?o.then((t=>Zn(t,r)||n)):Zn(o,r)||n},get(t,e){return this.getState("/settings","state",{id:t,def:e})},getStoreLocale(){return Me(this.state,"store.locale")},getStoreLocales(){return Me(this.state,"store.locales")},set({model:t,path:r,value:n}){const o=t?`${t.replace(/s$/,"")}State`:"state",{useCamelCase:i}=e;let a={};"menus"===t?void 0!==r?Be(a,r||"",n):a=n:Be(a,r||"",n),i&&(a=Yi(a)),this[o]=Li(this[o],a),this.localizedState[this.locale]&&(this.localizedState[this.locale][o]=this.decodeLocale(this[o]))},menus(t,e){return this.findState("/settings/menus","menuState",{where:{id:t},def:e})},payments(t,e){return this.getState("/settings/payments","paymentState",{id:t,def:e})},session(t,e){return this.getState("/session","sessionState",{id:t,def:e})},decodeLocale(t){if(!t||"object"!=typeof t)return t;let e=this.getStoreLocales();return e=e?e.reduce(((t,e)=>({...t,[e.code]:e})),{}):{},ya(zi(t),this.locale,e)},async load(){try{const{settings:e,menus:r,payments:n,session:o}=await t("get","/settings/all");this.state=e,this.menuState=r,this.paymentState=n,this.sessionState=o,this.localizedState={}}catch(t){console.error(`Swell: unable to loading settings (${t})`)}}}}function ya(t,e,r){if(qi(t)){const n=Object.keys(t);for(let o of n)"$locale"==o&&(va(e,t,o,r),delete t.$locale),void 0!==t[o]&&(t[o]=ya(t[o],e,r))}else if(t instanceof Array)for(var n=0;n<t.length;n++)t[n]=ya(t[n],e,r);return t}function va(t,e,r,n){if(!t||!qi(e[r]))return;let o,i;const a=Object.keys(e[r]);for(let e of a){const r=e.replace(/\-.+$/,"");e!==t&&r!==t||(o=e,i=n[e])}if(!o&&qi(n)){const e=Object.keys(n);for(let r of e){const e=r.replace(/\-.+$/,"");r!==t&&e!==t||(o=r,i=n[r])}}let s,u={};if(i){let t=i.fallback;const o=t;for(;t&&(s=s||[],s.push(t),u={...e[r][t]||{},...u},t=n[t]&&n[t].fallback,o!==t););}let c={...u,...e[r][o]||{}};const l=Object.keys(c);for(let t of l){const n=null!==c[t]&&""!==c[t];let o=s&&!n;if(o)for(let n of s){if(o=!e[r][n]||null===e[r][n][t]||""===e[r][n][t],!o){e[t]=e[r][n][t];break}if("none"===n){e[t]=null;break}}else n&&(e[t]=c[t])}}var ma=function(t){return ke(t).toLowerCase()};var ba=function(t){return function(e,r,n){for(var o=-1,i=Object(e),a=n(e),s=a.length;s--;){var u=a[t?s:++o];if(!1===r(i[u],u,i))break}return e}}();var wa=function(t,e){return function(r,n){if(null==r)return r;if(!Gr(r))return t(r,n);for(var o=r.length,i=e?o:-1,a=Object(r);(e?i--:++i<o)&&!1!==n(a[i],i,a););return r}}((function(t,e){return t&&ba(t,e,Zr)}));var _a=function(t,e,r,n,o){return o(t,(function(t,o,i){r=n?(n=!1,t):e(r,t,o,i)})),r};var ja=function(t,e,r){var n=qt(t)?yo:_a,o=arguments.length<3;return n(t,In(e),r,o,wa)},Aa=Object.prototype.hasOwnProperty;var Sa=function(t){if(null==t)return!0;if(Gr(t)&&(qt(t)||"string"==typeof t||"function"==typeof t.splice||kr(t)||zr(t)||Pr(t)))return!t.length;var e=pn(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Yr(t))return!Jr(t).length;for(var r in t)if(Aa.call(t,r))return!1;return!0};var Ea=function(t,e){var r=-1,n=Gr(t)?Array(t.length):[];return wa(t,(function(t,o,i){n[++r]=e(t,o,i)})),n};var Ca=function(t,e){return(qt(t)?Oe:Ea)(t,In(e))};const Oa={city:"city",country:"country",line1:"address1",line2:"address2",postal_code:"zip",state:"state"},xa={name:"name",phone:"phone"};function Pa(t){const{account:e={},billing:r,shipping:n}=t,o={...e.shipping,...e.billing,...n,...r},i=t=>ja(t,((t,e,r)=>{const n=o[e];return n&&(t[r]=n),t}),{}),a=i(xa);if(!Sa(a)){const t=i(Oa);return{...a,...Sa(t)?{}:{address:t}}}}function Ra(t){const e=ma(Me(t,"currency","eur")),r=Ca(t.items,(t=>({type:"sku",description:t.product.name,quantity:t.quantity,currency:e,amount:Math.round(100*Nn(t.price_total-t.discount_total))}))),n=Me(t,"tax_included_total");n&&r.push({type:"tax",description:"Taxes",currency:e,amount:Math.round(100*Nn(n))});const o=Me(t,"shipping",{}),i=Me(t,"shipment_total",{});return o.price&&r.push({type:"shipping",description:o.service_name,currency:e,amount:Math.round(100*Nn(i))}),r}async function ka(t,e){const r={type:"klarna",flow:"redirect",amount:Math.round(100*Me(e,"grand_total",0)),currency:ma(Me(e,"currency","eur")),klarna:{product:"payment",purchase_country:Me(e,"settings.country","DE")},source_order:{items:Ra(e)},redirect:{return_url:window.location.href}};return function(t,e){const r=(t,e)=>ja(t,((t,r,n)=>{const o=e[r];return o&&(t[n]=o),t}),{});t.klarna={...t.klarna,...r({shipping_first_name:"first_name",shipping_last_name:"last_name"},e.shipping)};const n=r({phone:"phone"},e.shipping),o=r(Oa,e.shipping);(n||o)&&(t.source_order.shipping={...n||{},...o?{address:o}:{}}),t.klarna={...t.klarna,...r({first_name:"first_name",last_name:"last_name"},e.billing||Me(e,"account.billing")||e.shipping)};const i=r({email:"email"},e.account),a=r(Oa,e.billing||Me(e,"account.billing")||e.shipping);(i||a)&&(t.owner={...i||{},...a?{address:a}:{}})}(r,e),await t.createSource(r)}async function Ua(t,e){const r={type:"bancontact",amount:Math.round(100*Me(e,"grand_total",0)),currency:ma(Me(e,"currency","eur")),redirect:{return_url:window.location.href}};return function(t,e){const{account:r={},billing:n,shipping:o}=e,i={...r.shipping,...r.billing,...o,...n},a=((t,e)=>ja(t,((t,r,n)=>{const o=e[r];return o&&(t[n]=o),t}),{}))(Oa,i);t.owner={email:r.email,name:i.name||r.name,...i.phone?{phone:i.phone}:r.phone?{phone:r.phone}:{},...Sa(a)?{}:{address:a}}}(r,e),await t.createSource(r)}function Ia(t,e){return["BIF","DJF","JPY","KRW","PYG","VND","XAF","XPF","CLP","GNF","KMF","MGA","RWF","VUV","XOF"].includes(t.toUpperCase())?e:Math.round(100*e)}const Ta={},$a={},Da={};function Ba(t){return{params:null,methodSettings:null,async methods(){if(this.methodSettings)return this.methodSettings;const e=await t("get","/payment/methods");return this.methodSettings=e},async createElements(e){this.params=e||{};const r=Ni(await da.methods(t).get());if(!r)throw new Error("Cart not found");const n=Ni(await ga.methods(t).payments());if(n.error)throw new Error(n.error);await async function(t,e,r,n){n.card&&(r.card?"braintree"===r.card.gateway?window.braintree||await za("braintree-web","https://js.braintreegateway.com/web/3.57.0/js/client.min.js"):"stripe"===r.card.gateway&&(window.Stripe||await za("stripe-js","https://js.stripe.com/v3/"),await Ma(t,r,n)):console.error("Payment element error: credit card payments are disabled. See Payment settings in the Swell dashboard for details."));n.ideal&&(r.card?r.ideal?"stripe"===r.card.gateway&&(window.Stripe||await za("stripe-js","https://js.stripe.com/v3/"),await Ma(t,r,n)):console.error("Payment element error: iDEAL payments are disabled. See Payment settings in the Swell dashboard for details."):console.error("Payment element error: credit card payments are disabled. See Payment settings in the Swell dashboard for details."));n.paypal&&(r.paypal?(window.paypal||await za("paypal-sdk",`https://www.paypal.com/sdk/js?client-id=${r.paypal.client_id}&merchant-id=${r.paypal.merchant_id}&vault=true`),r.card&&"braintree"===r.card.gateway&&"braintree"===r.paypal.gateway&&(window.braintree||await za("braintree-web","https://js.braintreegateway.com/web/3.57.0/js/client.min.js"),window.braintree&&!window.braintree.paypalCheckout&&await za("braintree-web-paypal-checkout","https://js.braintreegateway.com/web/3.57.0/js/paypal-checkout.min.js"),await async function(t,e,r,n){const o=await Qi("post","/authorization",{gateway:"braintree"});if(o.error)throw new Error(o.error);const i=window.braintree,a=window.paypal;i.client.create({authorization:o}).then((t=>i.paypalCheckout.create({client:t}))).then((r=>a.Buttons({style:n.paypal.style||{},createBillingAgreement:()=>r.createPayment({flow:"vault",currency:e.currency,amount:e.grand_total}),onApprove:(e,o)=>r.tokenizePayment(e).then((({nonce:e})=>da.methods(t).update({billing:{paypal:{nonce:e}}}))).then((()=>Ki(n.paypal.onSuccess)&&n.paypal.onSuccess(e,o))).catch(Ki(n.paypal.onError)?n.paypal.onError:t=>console.error("PayPal error",t)),onCancel:Ki(n.paypal.onCancel)?()=>n.paypal.onCancel():()=>console.log("PayPal payment cancelled"),onError:Ki(n.paypal.onError)?t=>n.paypal.onError(t):t=>console.error("PayPal error",t)}).render(n.paypal.elementId||"#paypal-button"))).catch(Ki(n.paypal.onError)?n.paypal.onError:t=>console.error("PayPal error",t))}(t,e,0,n))):console.error("Payment element error: PayPal payments are disabled. See Payment settings in the Swell dashboard for details."))}(t,r,n,this.params)},async tokenize(e){const r=Ni(await da.methods(t).get());if(!r)throw new Error("Cart not found");const n=Ni(await ga.methods(t).payments());if(n.error)throw new Error(n.error);return await async function(t,e,r,n){const o=t=>{const r=Me(e,"card.onError")||Me(e,"ideal.onError")||Me(e,"klarna.onError")||Me(e,"bancontact.onError");if(Ki(r))return r(t);throw new Error(t.message)};if(!e)return o({message:"Tokenization parameters not passed"});if(e.card&&r.card){if("stripe"===r.card.gateway&&$a.stripe&&Da.stripe){const r=Da.stripe,i=await async function(t,e,r){const n=Pa(r),{error:o,paymentMethod:i}=await t.createPaymentMethod({type:"card",card:e,...n?{billing_details:n}:{}});return o?{error:o}:{token:i.id,last4:i.card.last4,exp_month:i.card.exp_month,exp_year:i.card.exp_year,brand:i.card.brand,address_check:i.card.checks.address_line1_check,cvc_check:i.card.checks.cvc_check,zip_check:i.card.checks.address_zip_check}}(r,$a.stripe,n);if(i.error)return o(i.error);const a=ma(Me(n,"currency","usd")),s=Ia(a,Me(n,"grand_total",0)),u=Me(n,"account.stripe_customer"),c=Ni(await Ba(t).createIntent({gateway:"stripe",intent:{payment_method:i.token,amount:s,currency:a,capture_method:"manual",setup_future_usage:"off_session",...u?{customer:u}:{}}}).catch((t=>o(t))));if(c&&"requires_confirmation"===c.status){const{paymentIntent:n,error:a}=await r.confirmCardPayment(c.client_secret);return a?o(a):await da.methods(t).update({billing:{method:"card",card:i,intent:{stripe:{id:n.id}}}}).then((()=>Ki(e.card.onSuccess)&&e.card.onSuccess())).catch((t=>o(t)))}}}else if(e.ideal&&r.ideal){if(r.card&&"stripe"===r.card.gateway&&$a.stripe&&Da.stripe){const{error:e,paymentMethod:r}=await async function(t,e,r={}){const n=Pa(r);return await t.createPaymentMethod({type:"ideal",ideal:e,...n?{billing_details:n}:{}})}(Da.stripe,$a.stripe,n.billing);if(e)return o(e);const i=ma(Me(n,"currency","eur")),a=Ia(i,Me(n,"grand_total",0)),s=Ni(await Ba(t).createIntent({gateway:"stripe",intent:{payment_method:r.id,amount:a,currency:i,payment_method_types:"ideal",confirmation_method:"manual",confirm:!0,return_url:window.location.href}}).catch((t=>o(t))));if(s)return await da.methods(t).update({billing:{method:"ideal",ideal:{token:r.id},intent:{stripe:{id:s.id}}}}).catch((t=>o(t))),("requires_action"===s.status||"requires_source_action"===s.status)&&await Da.stripe.handleCardAction(s.client_secret)}}else if(e.klarna&&r.klarna){if(r.card&&"stripe"===r.card.gateway){window.Stripe||await za("stripe-js","https://js.stripe.com/v3/");const{publishable_key:e}=r.card,i=window.Stripe(e),a=Ni(await ga.methods(t).get()),{error:s,source:u}=await ka(i,{...n,settings:a.store});return s?o(s):da.methods(t).update({billing:{method:"klarna"}}).then((()=>window.location.replace(u.redirect.url))).catch((t=>o(t)))}}else if(e.bancontact&&r.bancontact&&r.card&&"stripe"===r.card.gateway){window.Stripe||await za("stripe-js","https://js.stripe.com/v3/");const{publishable_key:e}=r.card,i=window.Stripe(e),{error:a,source:s}=await Ua(i,n);return a?o(a):da.methods(t).update({billing:{method:"bancontact"}}).then((()=>window.location.replace(s.redirect.url))).catch((t=>o(t)))}}(t,e||this.params,n,r)},async createIntent(t){const e=await Qi("post","/intent",t);if(e.errors){const t=Object.keys(e.errors)[0],r=new Error(e.errors[t].message||"Unknown error");throw r.code="vault_error",r.status=402,r.param=t,r}return e},async updateIntent(t){const e=await Qi("put","/intent",t);if(e.errors){const t=Object.keys(e.errors)[0],r=new Error(e.errors[t].message||"Unknown error");throw r.code="vault_error",r.status=402,r.param=t,r}return e}}}const za=async(t,e)=>(Ta[t]=Ta[t]||new Promise((r=>{const n=document.createElement("script");n.id=t,n.src=e,n.async=!0,n.type="text/javascript",n.addEventListener("load",(()=>{r(),Ta[t]=null}),{once:!0}),document.head.appendChild(n)})),Ta[t]);async function Ma(t,e,r){const{publishable_key:n}=e.card,o=window.Stripe(n),i=o.elements(),a=t=>{const e=Me(r,`card[${t}]`)||r.card||r.ideal,n=e.options||{},o=i.create(t,n);o.mount(e.elementId||`#${t}-element`),e.onChange&&o.on("change",e.onChange),e.onReady&&o.on("ready",e.onReady),e.onFocus&&o.on("focus",e.onFocus),e.onBlur&&o.on("blur",e.onBlur),e.onEscape&&o.on("escape",e.onEscape),e.onClick&&o.on("click",e.onClick),"card"!==t&&"cardNumber"!==t&&"idealBank"!==t||($a.stripe=o)};Da.stripe=o,r.ideal?a("idealBank"):r.card.separateElements?(a("cardNumber"),a("cardExpiry"),a("cardCvc")):a("card")}const La={store:null,key:null,url:null,useCamelCase:null,previewContent:null},qa={options:La,request:Ya,init(t,e,r={}){La.key=e,La.store=t,La.url=r.url?Gi(r.url):`https://${t}.swell.store`,La.vaultUrl=r.vaultUrl?Gi(r.vaultUrl):"https://vault.schema.io",La.timeout=r.timeout&&parseInt(r.timeout,10)||2e4,La.useCamelCase=r.useCamelCase||!1,La.previewContent=r.previewContent||!1,La.session=r.session,La.locale=r.locale,La.currency=r.currency,La.api=qa,Mi=La},auth(...t){return this.init(...t)},get:(t,e)=>Ya("get",t,e),put:(t,e)=>Ya("put",t,e),post:(t,e)=>Ya("post",t,e),delete:(t,e)=>Ya("delete",t,e),cache:aa,card:ra,cart:da(Ya,La),account:function(t){return{state:null,async requestStateChange(e,r,n,o){const i=await t(e,r,n,o);return i&&i.errors?i:this.state=i},get(t){return this.requestStateChange("get","/account",t)},create(t){return this.requestStateChange("post","/account",t)},update(t){return this.requestStateChange("put","/account",t)},login(t,e){return this.requestStateChange("post","/account/login",{email:t,password:e})},logout(){return this.state=null,t("post","/account/logout")},recover:e=>t("post","/account/recover",e),listAddresses:e=>t("get","/account/addresses",e),createAddress:e=>t("post","/account/addresses",e),updateAddress:(e,r)=>t("put",`/account/addresses/${e}`,r),deleteAddress:e=>t("delete",`/account/addresses/${e}`),listCards:e=>t("get","/account/cards",e),createCard:e=>t("post","/account/cards",e),updateCard:(e,r)=>t("put",`/account/cards/${e}`,r),deleteCard:e=>t("delete",`/account/cards/${e}`),listOrders:e=>t("get","/account/orders",e),getOrder:e=>t("get",`/account/orders/${e}`),getAddresses:e=>t("get","/account/addresses",e),getCards:e=>t("get","/account/cards",e),getOrders:e=>t("get","/account/orders",e)}}(Ya),products:function(t,e){sa=e;const{get:r,list:n}=Hi(t,"/products",["list","get"]);return{get:(t,...e)=>aa.getFetch("products",t,(()=>r(t,...e))),list:n,variation:ca,categories:fa,attributes:ha,priceRange:pa,filters:la}}(Ya,La),categories:function(t){const{get:e,list:r}=Hi(t,"/categories",["list","get"]);return{get:(t,...r)=>aa.getFetch("categories",t,(()=>e(t,...r))),list:r}}(Ya),attributes:function(t){const{get:e,list:r}=Hi(t,"/attributes",["list","get"]);return{get:(t,...r)=>aa.getFetch("attributes",t,(()=>e(t,...r))),list:r}}(Ya),subscriptions:function(t){return{get:(e,r)=>t("get","/subscriptions",e,r),getCleanData:t=>(t&&t.options&&(t.options=ua(t.options)),t.items&&t.items.map&&(t.items=t.items.map((t=>(t.options&&(t.options=ua(t.options)),t)))),t),create(e){return t("post","/subscriptions",this.getCleanData(e))},update(e,r){return t("put",`/subscriptions/${e}`,this.getCleanData(r))},addItem(e,r){return t("post",`/subscriptions/${e}/items`,this.getCleanData(r))},setItems(e,r){return r&&r.map&&(r=r.map(this.getCleanData)),t("put",`/subscriptions/${e}/items`,r)},updateItem(e,r,n){return t("put",`/subscriptions/${e}/items/${r}`,this.getCleanData(n))},removeItem:(e,r)=>t("delete",`/subscriptions/${e}/items/${r}`)}}(Ya),content:function(t,e){return{get:(r,n,o)=>aa.getFetch(`content_${r}`,n,(()=>t("get",`/content/${r}`,n,{$preview:e.previewContent,...o||{}}))),list:(e,r)=>t("get",`/content/${e}`,void 0,r)}}(Ya,La),settings:ga(Ya,La),payment:Ba(Ya),locale:function(t,e){return{code:null,state:null,list:()=>e.api.settings.get("store.locales",[]),async select(r){return this.set(r),oa("swell-locale",r),e.api.settings.locale=r,await t("put","/session",{locale:r})},selected(){if(this.code)return this.code;const t=e.api.settings.getStoreLocale(),r=na("swell-locale");return e.api.settings.locale=r||t,r||t},get(){return this.code||(this.code=this.selected()),this.state||(this.state=this.set(this.code)),this.state},set(t){return this.code=t,this.state=Zn(this.list(),{code:t})||{},this.state}}}(Ya,La),currency:function(t,e){return{code:null,state:null,locale:null,formatter:null,list:()=>e.api.settings.get("store.currencies",[]),async select(e){return this.set(e),oa("swell-currency",e),await t("put","/session",{currency:e})},selected(){if(this.code)return this.code;const t=e.api.settings.get("store.currency");return na("swell-currency")||t},get(){return this.code||(this.code=this.selected()),this.state||(this.state=this.set(this.code)),this.state},set(t){this.code=t,this.locale=e.api.settings.get("store.locale","object"==typeof navigator?navigator.language:"en-US"),this.state=Zn(this.list(),{code:t})||{};try{this.formatter=new Intl.NumberFormat(this.locale,{style:"currency",currency:t,currencyDisplay:"symbol",minimumFractionDigits:this.state.decimals,maximumFractionDigits:this.state.decimals})}catch(t){console.error(t)}return this.state},format(t,e={}){let r=this.get();if(e.code&&e.code!==r.code){const t=this.list();r=Zn(t,{code:e.code})||{}}const{code:n,rate:o,decimals:i,type:a}=r,s=e.code||n,u=e.rate||o,c=e.locale||this.locale,l="number"==typeof e.decimals?e.decimals:i;let f,h=t;"display"!==a&&!e.rate||"number"!=typeof u||(h=t*u);try{return f=s===this.state.code&&c===this.locale&&l===this.state.decimals?this.formatter:new Intl.NumberFormat(c,{style:"currency",currency:s,currencyDisplay:"symbol",minimumFractionDigits:l,maximumFractionDigits:l}),"number"==typeof h?f.format(h):Me(f.formatToParts(0),"0.value","$")}catch(t){console.error(t)}return String(t)}}}(Ya,La)};async function Ya(t,e,r,n,o){const i=String(t).toLowerCase();let a=e,s=r;void 0===n&&"string"!=typeof r||(a=[Gi(e),Ji(r)].join("/"),s=n);const u={...La,...o},c=`${u.url}${u.base||""}/api`;var l;let f;if(a=u.fullUrl||`${c}/${l=a,Ji(Gi(l))}`,s=u.useCamelCase?Ni(s):s,"get"===i){let t;[a,t]=a.split("?");const e=[t,Zi(s)].join("&").replace(/^&/,"");a=`${a}${e?`?${e}`:""}`}else f=JSON.stringify(s);const h=u.session||na("swell-session"),p=u.locale||na("swell-locale"),d=u.currency||na("swell-currency"),g={"Content-Type":"application/json",Authorization:`Basic ${y=String(u.key),"undefined"!=typeof btoa?btoa(y):b.from(y).toString("base64")}`,...h?{"X-Session":h}:{},...p?{"X-Locale":p}:{},...d?{"X-Currency":d}:{}};var y;const v=await fetch(a,{method:i,headers:g,body:f,credentials:"include",mode:"cors"}),m=v.headers.get("X-Session");"string"==typeof m&&h!==m&&oa("swell-session",m);const w=await v.json();if(w&&w.error){const t=new Error(w.error.message);throw t.status=v.status,t.code=w.error.code,t.param=w.error.param,t}if(!v.ok){const t=new Error("A connection error occurred while making the request");throw t.code="connection_error",t}return La.useCamelCase?Yi(w):w}return"undefined"!=typeof window&&(window.swell={version:"@VERSION@"}),qa}));
