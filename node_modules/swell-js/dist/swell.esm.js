import"isomorphic-fetch";import{stringify as t}from"qs";import{mergeAdvanced as e}from"object-merge-advanced";import{normalizeKeys as r}from"object-keys-normalizer";var n="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},o=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s=!1;function u(){s=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)o[e]=t[e],i[t.charCodeAt(e)]=e;i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63}function c(t,e,r){for(var n,i,a=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],a.push(o[(i=n)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return a.join("")}function l(t){var e;s||u();for(var r=t.length,n=r%3,i="",a=[],l=16383,f=0,h=r-n;f<h;f+=l)a.push(c(t,f,f+l>h?h:f+l));return 1===n?(e=t[r-1],i+=o[e>>2],i+=o[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=o[e>>10],i+=o[e>>4&63],i+=o[e<<2&63],i+="="),a.push(i),a.join("")}function f(t,e,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?o-1:0,h=r?-1:1,p=t[e+f];for(f+=h,i=p&(1<<-l)-1,p>>=-l,l+=s;l>0;i=256*i+t[e+f],f+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=c}return(p?-1:1)*a*Math.pow(2,i-n)}function h(t,e,r,n,o,i){var a,s,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,o),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[r+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[r+p]=255&a,p+=d,a/=256,c-=8);t[r+p-d]|=128*g}var p={}.toString,d=Array.isArray||function(t){return"[object Array]"==p.call(t)};function g(){return b.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function y(t,e){if(g()<e)throw new RangeError("Invalid typed array length");return b.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=b.prototype:(null===t&&(t=new b(e)),t.length=e),t}function b(t,e,r){if(!(b.TYPED_ARRAY_SUPPORT||this instanceof b))return new b(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return _(this,t)}return m(this,t,e,r)}function m(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);b.TYPED_ARRAY_SUPPORT?(t=e).__proto__=b.prototype:t=j(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!b.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|E(e,r),o=(t=y(t,n)).write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(S(e)){var r=0|A(e.length);return 0===(t=y(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?y(t,0):j(t,e);if("Buffer"===e.type&&d(e.data))return j(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function w(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function _(t,e){if(w(e),t=y(t,e<0?0:0|A(e)),!b.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function j(t,e){var r=e.length<0?0:0|A(e.length);t=y(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function A(t){if(t>=g())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g().toString(16)+" bytes");return 0|t}function S(t){return!(null==t||!t._isBuffer)}function E(t,e){if(S(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(t).length;default:if(n)return H(t).length;e=(""+e).toLowerCase(),n=!0}}function C(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,r);case"utf8":case"utf-8":return B(this,e,r);case"ascii":return M(this,e,r);case"latin1":case"binary":return z(this,e,r);case"base64":return D(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function O(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function x(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=b.from(e,n)),S(e))return 0===e.length?-1:P(t,e,r,n,o);if("number"==typeof e)return e&=255,b.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):P(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function P(t,e,r,n,o){var i,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var l=-1;for(i=r;i<s;i++)if(c(t,i)===c(e,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(r+u>s&&(r=s-u),i=r;i>=0;i--){for(var f=!0,h=0;h<u;h++)if(c(t,i+h)!==c(e,h)){f=!1;break}if(f)return i}return-1}function R(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function k(t,e,r,n){return Q(H(e,t.length-r),t,r,n)}function U(t,e,r,n){return Q(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function I(t,e,r,n){return U(t,e,r,n)}function T(t,e,r,n){return Q(K(e),t,r,n)}function $(t,e,r,n){return Q(function(t,e){for(var r,n,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function D(t,e,r){return 0===e&&r===t.length?l(t):l(t.slice(e,r))}function B(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,a,s,u,c=t[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&c)<<6|63&i)>127&&(l=u);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(u=(15&c)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}b.TYPED_ARRAY_SUPPORT=void 0===n.TYPED_ARRAY_SUPPORT||n.TYPED_ARRAY_SUPPORT,b.poolSize=8192,b._augment=function(t){return t.__proto__=b.prototype,t},b.from=function(t,e,r){return m(null,t,e,r)},b.TYPED_ARRAY_SUPPORT&&(b.prototype.__proto__=Uint8Array.prototype,b.__proto__=Uint8Array),b.alloc=function(t,e,r){return function(t,e,r,n){return w(e),e<=0?y(t,e):void 0!==r?"string"==typeof n?y(t,e).fill(r,n):y(t,e).fill(r):y(t,e)}(null,t,e,r)},b.allocUnsafe=function(t){return _(null,t)},b.allocUnsafeSlow=function(t){return _(null,t)},b.isBuffer=function(t){return null!=t&&(!!t._isBuffer||tt(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&tt(t.slice(0,0))}(t))},b.compare=function(t,e){if(!S(t)||!S(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},b.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.concat=function(t,e){if(!d(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return b.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=b.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var i=t[r];if(!S(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},b.byteLength=E,b.prototype._isBuffer=!0,b.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)O(this,e,e+1);return this},b.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)O(this,e,e+3),O(this,e+1,e+2);return this},b.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)O(this,e,e+7),O(this,e+1,e+6),O(this,e+2,e+5),O(this,e+3,e+4);return this},b.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?B(this,0,t):C.apply(this,arguments)},b.prototype.equals=function(t){if(!S(t))throw new TypeError("Argument must be a Buffer");return this===t||0===b.compare(this,t)},b.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},b.prototype.compare=function(t,e,r,n,o){if(!S(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(i,a),u=this.slice(n,o),c=t.slice(e,r),l=0;l<s;++l)if(u[l]!==c[l]){i=u[l],a=c[l];break}return i<a?-1:a<i?1:0},b.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},b.prototype.indexOf=function(t,e,r){return x(this,t,e,r,!0)},b.prototype.lastIndexOf=function(t,e,r){return x(this,t,e,r,!1)},b.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return R(this,t,e,r);case"utf8":case"utf-8":return k(this,t,e,r);case"ascii":return U(this,t,e,r);case"latin1":case"binary":return I(this,t,e,r);case"base64":return T(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function z(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function L(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=X(t[i]);return o}function Y(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function N(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function q(t,e,r,n,o,i){if(!S(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function F(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function V(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function J(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Z(t,e,r,n,o){return o||J(t,0,r,4),h(t,e,r,n,23,4),r+4}function G(t,e,r,n,o){return o||J(t,0,r,8),h(t,e,r,n,52,8),r+8}b.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),b.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=b.prototype;else{var o=e-t;r=new b(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},b.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},b.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},b.prototype.readUInt8=function(t,e){return e||N(t,1,this.length),this[t]},b.prototype.readUInt16LE=function(t,e){return e||N(t,2,this.length),this[t]|this[t+1]<<8},b.prototype.readUInt16BE=function(t,e){return e||N(t,2,this.length),this[t]<<8|this[t+1]},b.prototype.readUInt32LE=function(t,e){return e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},b.prototype.readUInt32BE=function(t,e){return e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},b.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},b.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},b.prototype.readInt8=function(t,e){return e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},b.prototype.readInt16LE=function(t,e){e||N(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},b.prototype.readInt16BE=function(t,e){e||N(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},b.prototype.readInt32LE=function(t,e){return e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},b.prototype.readInt32BE=function(t,e){return e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},b.prototype.readFloatLE=function(t,e){return e||N(t,4,this.length),f(this,t,!0,23,4)},b.prototype.readFloatBE=function(t,e){return e||N(t,4,this.length),f(this,t,!1,23,4)},b.prototype.readDoubleLE=function(t,e){return e||N(t,8,this.length),f(this,t,!0,52,8)},b.prototype.readDoubleBE=function(t,e){return e||N(t,8,this.length),f(this,t,!1,52,8)},b.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||q(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},b.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||q(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},b.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,1,255,0),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},b.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):F(this,t,e,!0),e+2},b.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,2,65535,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):F(this,t,e,!1),e+2},b.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):V(this,t,e,!0),e+4},b.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,4,4294967295,0),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},b.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);q(this,t,e,r,o-1,-o)}var i=0,a=1,s=0;for(this[e]=255&t;++i<r&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+r},b.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);q(this,t,e,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+r},b.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,1,127,-128),b.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},b.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):F(this,t,e,!0),e+2},b.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,2,32767,-32768),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):F(this,t,e,!1),e+2},b.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,4,2147483647,-2147483648),b.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):V(this,t,e,!0),e+4},b.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||q(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),b.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):V(this,t,e,!1),e+4},b.prototype.writeFloatLE=function(t,e,r){return Z(this,t,e,!0,r)},b.prototype.writeFloatBE=function(t,e,r){return Z(this,t,e,!1,r)},b.prototype.writeDoubleLE=function(t,e,r){return G(this,t,e,!0,r)},b.prototype.writeDoubleBE=function(t,e,r){return G(this,t,e,!1,r)},b.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!b.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},b.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!b.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var a=S(t)?t:H(new b(t,n).toString()),s=a.length;for(i=0;i<r-e;++i)this[i+e]=a[i%s]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function X(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function K(t){return function(t){var e,r,n,o,c,l;s||u();var f=t.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");c="="===t[f-2]?2:"="===t[f-1]?1:0,l=new a(3*f/4-c),n=c>0?f-4:f;var h=0;for(e=0,r=0;e<n;e+=4,r+=3)o=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],l[h++]=o>>16&255,l[h++]=o>>8&255,l[h++]=255&o;return 2===c?(o=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,l[h++]=255&o):1===c&&(o=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,l[h++]=o>>8&255,l[h++]=255&o),l}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Q(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function tt(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var et="object"==typeof n&&n&&n.Object===Object&&n;function rt(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})})),e}function nt(t){var e={exports:{}};return t(e,e.exports),e.exports}module.exports=et;var ot=rt(Object.freeze({__proto__:null})),it="object"==typeof self&&self&&self.Object===Object&&self,at=ot||it||Function("return this")(),st=at.Symbol,ut=Object.prototype,ct=ut.hasOwnProperty,lt=ut.toString,ft=st?st.toStringTag:void 0;var ht=function(t){var e=ct.call(t,ft),r=t[ft];try{t[ft]=void 0;var n=!0}catch(t){}var o=lt.call(t);return n&&(e?t[ft]=r:delete t[ft]),o},pt=Object.prototype.toString;var dt=function(t){return pt.call(t)},gt=st?st.toStringTag:void 0;var vt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":gt&&gt in Object(t)?ht(t):dt(t)};var yt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var bt,mt=function(t){if(!yt(t))return!1;var e=vt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},wt=at["__core-js_shared__"],_t=(bt=/[^.]+$/.exec(wt&&wt.keys&&wt.keys.IE_PROTO||""))?"Symbol(src)_1."+bt:"";var jt=function(t){return!!_t&&_t in t},At=Function.prototype.toString;var St=function(t){if(null!=t){try{return At.call(t)}catch(t){}try{return t+""}catch(t){}}return""},Et=/^\[object .+?Constructor\]$/,Ct=Function.prototype,Ot=Object.prototype,xt=Ct.toString,Pt=Ot.hasOwnProperty,Rt=RegExp("^"+xt.call(Pt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var kt=function(t){return!(!yt(t)||jt(t))&&(mt(t)?Rt:Et).test(St(t))};var Ut=function(t,e){return null==t?void 0:t[e]};var It=function(t,e){var r=Ut(t,e);return kt(r)?r:void 0},Tt=function(){try{var t=It(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var $t=function(t,e,r){"__proto__"==e&&Tt?Tt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var Dt=function(t,e){return t===e||t!=t&&e!=e},Bt=Object.prototype.hasOwnProperty;var Mt=function(t,e,r){var n=t[e];Bt.call(t,e)&&Dt(n,r)&&(void 0!==r||e in t)||$t(t,e,r)},zt=Array.isArray;var Lt=function(t){return null!=t&&"object"==typeof t};var Yt=function(t){return"symbol"==typeof t||Lt(t)&&"[object Symbol]"==vt(t)},Nt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qt=/^\w*$/;var Ft=function(t,e){if(zt(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Yt(t))||(qt.test(t)||!Nt.test(t)||null!=e&&t in Object(e))},Vt=It(Object,"create");var Jt=function(){this.__data__=Vt?Vt(null):{},this.size=0};var Zt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gt=Object.prototype.hasOwnProperty;var Wt=function(t){var e=this.__data__;if(Vt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Gt.call(e,t)?e[t]:void 0},Xt=Object.prototype.hasOwnProperty;var Ht=function(t){var e=this.__data__;return Vt?void 0!==e[t]:Xt.call(e,t)};var Kt=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Vt&&void 0===e?"__lodash_hash_undefined__":e,this};function Qt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Qt.prototype.clear=Jt,Qt.prototype.delete=Zt,Qt.prototype.get=Wt,Qt.prototype.has=Ht,Qt.prototype.set=Kt;var te=Qt;var ee=function(){this.__data__=[],this.size=0};var re=function(t,e){for(var r=t.length;r--;)if(Dt(t[r][0],e))return r;return-1},ne=Array.prototype.splice;var oe=function(t){var e=this.__data__,r=re(e,t);return!(r<0)&&(r==e.length-1?e.pop():ne.call(e,r,1),--this.size,!0)};var ie=function(t){var e=this.__data__,r=re(e,t);return r<0?void 0:e[r][1]};var ae=function(t){return re(this.__data__,t)>-1};var se=function(t,e){var r=this.__data__,n=re(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function ue(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ue.prototype.clear=ee,ue.prototype.delete=oe,ue.prototype.get=ie,ue.prototype.has=ae,ue.prototype.set=se;var ce=ue,le=It(at,"Map");var fe=function(){this.size=0,this.__data__={hash:new te,map:new(le||ce),string:new te}};var he=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var pe=function(t,e){var r=t.__data__;return he(e)?r["string"==typeof e?"string":"hash"]:r.map};var de=function(t){var e=pe(this,t).delete(t);return this.size-=e?1:0,e};var ge=function(t){return pe(this,t).get(t)};var ve=function(t){return pe(this,t).has(t)};var ye=function(t,e){var r=pe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function be(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}be.prototype.clear=fe,be.prototype.delete=de,be.prototype.get=ge,be.prototype.has=ve,be.prototype.set=ye;var me=be;function we(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(we.Cache||me),r}we.Cache=me;var _e=we;var je=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ae=/\\(\\)?/g,Se=function(t){var e=_e(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(je,(function(t,r,n,o){e.push(n?o.replace(Ae,"$1"):r||t)})),e}));var Ee=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},Ce=st?st.prototype:void 0,Oe=Ce?Ce.toString:void 0;var xe=function t(e){if("string"==typeof e)return e;if(zt(e))return Ee(e,t)+"";if(Yt(e))return Oe?Oe.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r};var Pe=function(t){return null==t?"":xe(t)};var Re=function(t,e){return zt(t)?t:Ft(t,e)?[t]:Se(Pe(t))},ke=/^(?:0|[1-9]\d*)$/;var Ue=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&ke.test(t))&&t>-1&&t%1==0&&t<e};var Ie=function(t){if("string"==typeof t||Yt(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e};var Te=function(t,e,r,n){if(!yt(t))return t;for(var o=-1,i=(e=Re(e,t)).length,a=i-1,s=t;null!=s&&++o<i;){var u=Ie(e[o]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=a){var l=s[u];void 0===(c=n?n(l,u,s):void 0)&&(c=yt(l)?l:Ue(e[o+1])?[]:{})}Mt(s,u,c),s=s[u]}return t};var $e=function(t,e,r){return null==t?t:Te(t,e,r)};var De=function(t,e){for(var r=0,n=(e=Re(e,t)).length;null!=t&&r<n;)t=t[Ie(e[r++])];return r&&r==n?t:void 0};var Be=function(t,e,r){var n=null==t?void 0:De(t,e);return void 0===n?r:n};var Me=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var ze=function(t){return this.__data__.has(t)};function Le(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new me;++e<r;)this.add(t[e])}Le.prototype.add=Le.prototype.push=Me,Le.prototype.has=ze;var Ye=Le;var Ne=function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1};var qe=function(t){return t!=t};var Fe=function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1};var Ve=function(t,e,r){return e==e?Fe(t,e,r):Ne(t,qe,r)};var Je=function(t,e){return!!(null==t?0:t.length)&&Ve(t,e,0)>-1};var Ze=function(t,e,r){for(var n=-1,o=null==t?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1};var Ge=function(t,e){return t.has(e)},We=It(at,"Set");var Xe=function(){};var He=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},Ke=We&&1/He(new We([,-0]))[1]==1/0?function(t){return new We(t)}:Xe;var Qe=function(t,e,r){var n=-1,o=Je,i=t.length,a=!0,s=[],u=s;if(r)a=!1,o=Ze;else if(i>=200){var c=e?null:Ke(t);if(c)return He(c);a=!1,o=Ge,u=new Ye}else u=e?[]:s;t:for(;++n<i;){var l=t[n],f=e?e(l):l;if(l=r||0!==l?l:0,a&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),s.push(l)}else o(u,f,r)||(u!==s&&u.push(f),s.push(l))}return s};var tr=function(t){return t&&t.length?Qe(t):[]};var er=function(){this.__data__=new ce,this.size=0};var rr=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var nr=function(t){return this.__data__.get(t)};var or=function(t){return this.__data__.has(t)};var ir=function(t,e){var r=this.__data__;if(r instanceof ce){var n=r.__data__;if(!le||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new me(n)}return r.set(t,e),this.size=r.size,this};function ar(t){var e=this.__data__=new ce(t);this.size=e.size}ar.prototype.clear=er,ar.prototype.delete=rr,ar.prototype.get=nr,ar.prototype.has=or,ar.prototype.set=ir;var sr=ar;var ur=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1};var cr=function(t,e,r,n,o,i){var a=1&r,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=i.get(t),l=i.get(e);if(c&&l)return c==e&&l==t;var f=-1,h=!0,p=2&r?new Ye:void 0;for(i.set(t,e),i.set(e,t);++f<s;){var d=t[f],g=e[f];if(n)var v=a?n(g,d,f,e,t,i):n(d,g,f,t,e,i);if(void 0!==v){if(v)continue;h=!1;break}if(p){if(!ur(e,(function(t,e){if(!Ge(p,e)&&(d===t||o(d,t,r,n,i)))return p.push(e)}))){h=!1;break}}else if(d!==g&&!o(d,g,r,n,i)){h=!1;break}}return i.delete(t),i.delete(e),h},lr=at.Uint8Array;var fr=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r},hr=st?st.prototype:void 0,pr=hr?hr.valueOf:void 0;var dr=function(t,e,r,n,o,i,a){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new lr(t),new lr(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Dt(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=fr;case"[object Set]":var u=1&n;if(s||(s=He),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;n|=2,a.set(t,e);var l=cr(s(t),s(e),n,o,i,a);return a.delete(t),l;case"[object Symbol]":if(pr)return pr.call(t)==pr.call(e)}return!1};var gr=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t};var vr=function(t,e,r){var n=e(t);return zt(t)?n:gr(n,r(t))};var yr=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i};var br=function(){return[]},mr=Object.prototype.propertyIsEnumerable,wr=Object.getOwnPropertySymbols,_r=wr?function(t){return null==t?[]:(t=Object(t),yr(wr(t),(function(e){return mr.call(t,e)})))}:br;var jr=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var Ar=function(t){return Lt(t)&&"[object Arguments]"==vt(t)},Sr=Object.prototype,Er=Sr.hasOwnProperty,Cr=Sr.propertyIsEnumerable,Or=Ar(function(){return arguments}())?Ar:function(t){return Lt(t)&&Er.call(t,"callee")&&!Cr.call(t,"callee")};var xr=function(){return!1},Pr=nt((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?at.Buffer:void 0,i=(o?o.isBuffer:void 0)||xr;t.exports=i}));var Rr=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},kr={};kr["[object Float32Array]"]=kr["[object Float64Array]"]=kr["[object Int8Array]"]=kr["[object Int16Array]"]=kr["[object Int32Array]"]=kr["[object Uint8Array]"]=kr["[object Uint8ClampedArray]"]=kr["[object Uint16Array]"]=kr["[object Uint32Array]"]=!0,kr["[object Arguments]"]=kr["[object Array]"]=kr["[object ArrayBuffer]"]=kr["[object Boolean]"]=kr["[object DataView]"]=kr["[object Date]"]=kr["[object Error]"]=kr["[object Function]"]=kr["[object Map]"]=kr["[object Number]"]=kr["[object Object]"]=kr["[object RegExp]"]=kr["[object Set]"]=kr["[object String]"]=kr["[object WeakMap]"]=!1;var Ur=function(t){return Lt(t)&&Rr(t.length)&&!!kr[vt(t)]};var Ir=function(t){return function(e){return t(e)}},Tr=nt((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&ot.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i})),$r=Tr&&Tr.isTypedArray,Dr=$r?Ir($r):Ur,Br=Object.prototype.hasOwnProperty;var Mr=function(t,e){var r=zt(t),n=!r&&Or(t),o=!r&&!n&&Pr(t),i=!r&&!n&&!o&&Dr(t),a=r||n||o||i,s=a?jr(t.length,String):[],u=s.length;for(var c in t)!e&&!Br.call(t,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ue(c,u))||s.push(c);return s},zr=Object.prototype;var Lr=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||zr)};var Yr=function(t,e){return function(r){return t(e(r))}},Nr=Yr(Object.keys,Object),qr=Object.prototype.hasOwnProperty;var Fr=function(t){if(!Lr(t))return Nr(t);var e=[];for(var r in Object(t))qr.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Vr=function(t){return null!=t&&Rr(t.length)&&!mt(t)};var Jr=function(t){return Vr(t)?Mr(t):Fr(t)};var Zr=function(t){return vr(t,Jr,_r)},Gr=Object.prototype.hasOwnProperty;var Wr=function(t,e,r,n,o,i){var a=1&r,s=Zr(t),u=s.length;if(u!=Zr(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:Gr.call(e,l)))return!1}var f=i.get(t),h=i.get(e);if(f&&h)return f==e&&h==t;var p=!0;i.set(t,e),i.set(e,t);for(var d=a;++c<u;){var g=t[l=s[c]],v=e[l];if(n)var y=a?n(v,g,l,e,t,i):n(g,v,l,t,e,i);if(!(void 0===y?g===v||o(g,v,r,n,i):y)){p=!1;break}d||(d="constructor"==l)}if(p&&!d){var b=t.constructor,m=e.constructor;b==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m||(p=!1)}return i.delete(t),i.delete(e),p},Xr=It(at,"DataView"),Hr=It(at,"Promise"),Kr=It(at,"WeakMap"),Qr=St(Xr),tn=St(le),en=St(Hr),rn=St(We),nn=St(Kr),on=vt;(Xr&&"[object DataView]"!=on(new Xr(new ArrayBuffer(1)))||le&&"[object Map]"!=on(new le)||Hr&&"[object Promise]"!=on(Hr.resolve())||We&&"[object Set]"!=on(new We)||Kr&&"[object WeakMap]"!=on(new Kr))&&(on=function(t){var e=vt(t),r="[object Object]"==e?t.constructor:void 0,n=r?St(r):"";if(n)switch(n){case Qr:return"[object DataView]";case tn:return"[object Map]";case en:return"[object Promise]";case rn:return"[object Set]";case nn:return"[object WeakMap]"}return e});var an=on,sn=Object.prototype.hasOwnProperty;var un=function(t,e,r,n,o,i){var a=zt(t),s=zt(e),u=a?"[object Array]":an(t),c=s?"[object Array]":an(e),l="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),f="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),h=u==c;if(h&&Pr(t)){if(!Pr(e))return!1;a=!0,l=!1}if(h&&!l)return i||(i=new sr),a||Dr(t)?cr(t,e,r,n,o,i):dr(t,e,u,r,n,o,i);if(!(1&r)){var p=l&&sn.call(t,"__wrapped__"),d=f&&sn.call(e,"__wrapped__");if(p||d){var g=p?t.value():t,v=d?e.value():e;return i||(i=new sr),o(g,v,r,n,i)}}return!!h&&(i||(i=new sr),Wr(t,e,r,n,o,i))};var cn=function t(e,r,n,o,i){return e===r||(null==e||null==r||!Lt(e)&&!Lt(r)?e!=e&&r!=r:un(e,r,n,o,t,i))};var ln=function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var s=r[o];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++o<i;){var u=(s=r[o])[0],c=t[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in t))return!1}else{var f=new sr;if(n)var h=n(c,l,u,t,e,f);if(!(void 0===h?cn(l,c,3,n,f):h))return!1}}return!0};var fn=function(t){return t==t&&!yt(t)};var hn=function(t){for(var e=Jr(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,fn(o)]}return e};var pn=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}};var dn=function(t){var e=hn(t);return 1==e.length&&e[0][2]?pn(e[0][0],e[0][1]):function(r){return r===t||ln(r,t,e)}};var gn=function(t,e){return null!=t&&e in Object(t)};var vn=function(t,e,r){for(var n=-1,o=(e=Re(e,t)).length,i=!1;++n<o;){var a=Ie(e[n]);if(!(i=null!=t&&r(t,a)))break;t=t[a]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&Rr(o)&&Ue(a,o)&&(zt(t)||Or(t))};var yn=function(t,e){return null!=t&&vn(t,e,gn)};var bn=function(t,e){return Ft(t)&&fn(e)?pn(Ie(t),e):function(r){var n=Be(r,t);return void 0===n&&n===e?yn(r,t):cn(e,n,3)}};var mn=function(t){return t};var wn=function(t){return function(e){return null==e?void 0:e[t]}};var _n=function(t){return function(e){return De(e,t)}};var jn=function(t){return Ft(t)?wn(Ie(t)):_n(t)};var An=function(t){return"function"==typeof t?t:null==t?mn:"object"==typeof t?zt(t)?bn(t[0],t[1]):dn(t):jn(t)};var Sn=function(t){return function(e,r,n){var o=Object(e);if(!Vr(e)){var i=An(r);e=Jr(e),r=function(t){return i(o[t],t,o)}}var a=t(e,r,n);return a>-1?o[i?e[a]:a]:void 0}},En=/\s/;var Cn=function(t){for(var e=t.length;e--&&En.test(t.charAt(e)););return e},On=/^\s+/;var xn=function(t){return t?t.slice(0,Cn(t)+1).replace(On,""):t},Pn=/^[-+]0x[0-9a-f]+$/i,Rn=/^0b[01]+$/i,kn=/^0o[0-7]+$/i,Un=parseInt;var In=function(t){if("number"==typeof t)return t;if(Yt(t))return NaN;if(yt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=yt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=xn(t);var r=Rn.test(t);return r||kn.test(t)?Un(t.slice(2),r?2:8):Pn.test(t)?NaN:+t};var Tn=function(t){return t?Infinity===(t=In(t))||-Infinity===t?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var $n=function(t){var e=Tn(t),r=e%1;return e==e?r?e-r:e:0},Dn=Math.max;var Bn=Sn((function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var o=null==r?0:$n(r);return o<0&&(o=Dn(n+o,0)),Ne(t,An(e),o)}));var Mn=function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i};var zn=function(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:Mn(t,e,r)},Ln=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Yn=function(t){return Ln.test(t)};var Nn=function(t){return t.split("")},qn="[\\ud800-\\udfff]",Fn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Vn="\\ud83c[\\udffb-\\udfff]",Jn="[^\\ud800-\\udfff]",Zn="(?:\\ud83c[\\udde6-\\uddff]){2}",Gn="[\\ud800-\\udbff][\\udc00-\\udfff]",Wn="(?:"+Fn+"|"+Vn+")"+"?",Xn="[\\ufe0e\\ufe0f]?"+Wn+("(?:\\u200d(?:"+[Jn,Zn,Gn].join("|")+")[\\ufe0e\\ufe0f]?"+Wn+")*"),Hn="(?:"+[Jn+Fn+"?",Fn,Zn,Gn,qn].join("|")+")",Kn=RegExp(Vn+"(?="+Vn+")|"+Hn+Xn,"g");var Qn=function(t){return t.match(Kn)||[]};var to=function(t){return Yn(t)?Qn(t):Nn(t)};var eo=function(t){return function(e){e=Pe(e);var r=Yn(e)?to(e):void 0,n=r?r[0]:e.charAt(0),o=r?zn(r,1).join(""):e.slice(1);return n[t]()+o}}("toUpperCase");var ro=function(t){return eo(Pe(t).toLowerCase())};var no=function(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r};var oo=function(t){return function(e){return null==t?void 0:t[e]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),io=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ao=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var so=function(t){return(t=Pe(t))&&t.replace(io,oo).replace(ao,"")},uo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var co=function(t){return t.match(uo)||[]},lo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var fo=function(t){return lo.test(t)},ho="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",po="["+ho+"]",go="\\d+",vo="[\\u2700-\\u27bf]",yo="[a-z\\xdf-\\xf6\\xf8-\\xff]",bo="[^\\ud800-\\udfff"+ho+go+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",mo="(?:\\ud83c[\\udde6-\\uddff]){2}",wo="[\\ud800-\\udbff][\\udc00-\\udfff]",_o="[A-Z\\xc0-\\xd6\\xd8-\\xde]",jo="(?:"+yo+"|"+bo+")",Ao="(?:"+_o+"|"+bo+")",So="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Eo="[\\ufe0e\\ufe0f]?"+So+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",mo,wo].join("|")+")[\\ufe0e\\ufe0f]?"+So+")*"),Co="(?:"+[vo,mo,wo].join("|")+")"+Eo,Oo=RegExp([_o+"?"+yo+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[po,_o,"$"].join("|")+")",Ao+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[po,_o+jo,"$"].join("|")+")",_o+"?"+jo+"+(?:['’](?:d|ll|m|re|s|t|ve))?",_o+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",go,Co].join("|"),"g");var xo=function(t){return t.match(Oo)||[]};var Po=function(t,e,r){return t=Pe(t),void 0===(e=r?void 0:e)?fo(t)?xo(t):co(t):t.match(e)||[]},Ro=RegExp("['’]","g");var ko=function(t){return function(e){return no(Po(so(e).replace(Ro,"")),t,"")}},Uo=ko((function(t,e,r){return e=e.toLowerCase(),t+(r?ro(e):e)})),Io=ko((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));var To=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t};var $o=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var s=e[i],u=n?n(r[s],t[s],s,r,t):void 0;void 0===u&&(u=t[s]),o?$t(r,s,u):Mt(r,s,u)}return r};var Do=function(t,e){return t&&$o(e,Jr(e),t)};var Bo=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},Mo=Object.prototype.hasOwnProperty;var zo=function(t){if(!yt(t))return Bo(t);var e=Lr(t),r=[];for(var n in t)("constructor"!=n||!e&&Mo.call(t,n))&&r.push(n);return r};var Lo=function(t){return Vr(t)?Mr(t,!0):zo(t)};var Yo=function(t,e){return t&&$o(e,Lo(e),t)},No=nt((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?at.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=i?i(r):new t.constructor(r);return t.copy(n),n}}));var qo=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var Fo=function(t,e){return $o(t,_r(t),e)},Vo=Yr(Object.getPrototypeOf,Object),Jo=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)gr(e,_r(t)),t=Vo(t);return e}:br;var Zo=function(t,e){return $o(t,Jo(t),e)};var Go=function(t){return vr(t,Lo,Jo)},Wo=Object.prototype.hasOwnProperty;var Xo=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Wo.call(t,"index")&&(r.index=t.index,r.input=t.input),r};var Ho=function(t){var e=new t.constructor(t.byteLength);return new lr(e).set(new lr(t)),e};var Ko=function(t,e){var r=e?Ho(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},Qo=/\w*$/;var ti=function(t){var e=new t.constructor(t.source,Qo.exec(t));return e.lastIndex=t.lastIndex,e},ei=st?st.prototype:void 0,ri=ei?ei.valueOf:void 0;var ni=function(t){return ri?Object(ri.call(t)):{}};var oi=function(t,e){var r=e?Ho(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var ii=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return Ho(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return Ko(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return oi(t,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return ti(t);case"[object Set]":return new n;case"[object Symbol]":return ni(t)}},ai=Object.create,si=function(){function t(){}return function(e){if(!yt(e))return{};if(ai)return ai(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var ui=function(t){return"function"!=typeof t.constructor||Lr(t)?{}:si(Vo(t))};var ci=function(t){return Lt(t)&&"[object Map]"==an(t)},li=Tr&&Tr.isMap,fi=li?Ir(li):ci;var hi=function(t){return Lt(t)&&"[object Set]"==an(t)},pi=Tr&&Tr.isSet,di=pi?Ir(pi):hi,gi={};gi["[object Arguments]"]=gi["[object Array]"]=gi["[object ArrayBuffer]"]=gi["[object DataView]"]=gi["[object Boolean]"]=gi["[object Date]"]=gi["[object Float32Array]"]=gi["[object Float64Array]"]=gi["[object Int8Array]"]=gi["[object Int16Array]"]=gi["[object Int32Array]"]=gi["[object Map]"]=gi["[object Number]"]=gi["[object Object]"]=gi["[object RegExp]"]=gi["[object Set]"]=gi["[object String]"]=gi["[object Symbol]"]=gi["[object Uint8Array]"]=gi["[object Uint8ClampedArray]"]=gi["[object Uint16Array]"]=gi["[object Uint32Array]"]=!0,gi["[object Error]"]=gi["[object Function]"]=gi["[object WeakMap]"]=!1;var vi=function t(e,r,n,o,i,a){var s,u=1&r,c=2&r,l=4&r;if(n&&(s=i?n(e,o,i,a):n(e)),void 0!==s)return s;if(!yt(e))return e;var f=zt(e);if(f){if(s=Xo(e),!u)return qo(e,s)}else{var h=an(e),p="[object Function]"==h||"[object GeneratorFunction]"==h;if(Pr(e))return No(e,u);if("[object Object]"==h||"[object Arguments]"==h||p&&!i){if(s=c||p?{}:ui(e),!u)return c?Zo(e,Yo(s,e)):Fo(e,Do(s,e))}else{if(!gi[h])return i?e:{};s=ii(e,h,u)}}a||(a=new sr);var d=a.get(e);if(d)return d;a.set(e,s),di(e)?e.forEach((function(o){s.add(t(o,r,n,o,e,a))})):fi(e)&&e.forEach((function(o,i){s.set(i,t(o,r,n,i,e,a))}));var g=f?void 0:(l?c?Go:Zr:c?Lo:Jr)(e);return To(g||e,(function(o,i){g&&(o=e[i=o]),Mt(s,i,t(o,r,n,i,e,a))})),s};var yi=function(t){return vi(t,5)};let bi={};function mi(t,r,n={}){if(!r||"object"!=typeof r)return t;if(!t||"object"!=typeof t)return t;return e(t,r,{arrayMerge:function(t,e,r){const n=t.slice();return e.forEach(((e,o)=>{void 0===n[o]?n[o]=r.cloneUnlessOtherwiseSpecified(e,r):r.isMergeableObject(e)?n[o]=mi(t[o],e,r):-1===t.indexOf(e)&&n.push(e)})),n}})}function wi(t){return t&&"object"==typeof t&&!(t instanceof Array)}function _i(t){if(!t)return;const e=JSON.parse(JSON.stringify(t));return r(e,Si)}function ji(t){if(!t)return;const e=JSON.parse(JSON.stringify(t));return r(e,Ai)}function Ai(t){return("$"===t[0]?"$":"")+Io(t).replace(/\_([0-9])/g,"$1")}function Si(t){return("$"===t[0]?"$":"")+Uo(t).replace(/\_([0-9])/g,"$1")}function Ei(t){return"string"==typeof t?t.replace(/^[/]+/,""):""}function Ci(t){return"string"==typeof t?t.replace(/[/]+$/,""):""}function Oi(e){return t(e,{depth:10,encode:!1})}function xi(t,e,r){return t instanceof Array?t.reduce(e,r):r}function Pi(){return!("undefined"!=typeof window&&window&&window.document)}function Ri(t){return"function"==typeof t}function ki(t,e,r){return{list:r.indexOf("list")>=0?function(r){return t("get",e,void 0,r)}:void 0,get:r.indexOf("get")>=0?function(r,n){return t("get",e,r,n)}:void 0}}async function Ui(t,e,r,n){const o=bi.vaultUrl,i=bi.timeout,a=`swell_vault_response_${window.__swell_vault_request_id=window.__swell_vault_request_id||0,window.__swell_vault_request_id++,window.__swell_vault_request_id}`;return r={$jsonp:{method:t,callback:a},$data:r,$key:bi.key},new Promise(((t,n)=>{const s=document.createElement("script");s.type="text/javascript",s.src=`${Ci(o)}/${Ei(e)}?${function(t){const e=[],r=function(t,r){"function"==typeof r?r=r():null==r&&(r=""),e[e.length]=encodeURIComponent(t)+"="+encodeURIComponent(r)};for(const e in t)Ti(e,t[e],r);return e.join("&").replace(" ","+")}(r)}`;const u=setTimeout((()=>{window[a]({$error:`Request timed out after ${i/1e3} seconds`,$status:500})}),i);window[a]=e=>{if(clearTimeout(u),e&&e.$error){const t=new Error(e.$error);t.code="request_error",t.status=e.$status,n(t)}else if(!e||e.$status>=300){const t=new Error("A connection error occurred while making the request");t.code="connection_error",t.status=e.$status,n(t)}else t(bi.useCamelCase?_i(e.$data):e.$data);delete window[a],s.parentNode.removeChild(s)},document.getElementsByTagName("head")[0].appendChild(s)}))}const Ii=/\[\]$/;function Ti(t,e,r){let n;if(e instanceof Array)for(let n=0;n<e.length;n++)Ii.test(t)?r(t,v):Ti(t+"["+("object"==typeof v&&null!=v?n:"")+"]",v,r);else if(e&&"object"==typeof e)for(n in e)Ti(t+"["+n+"]",e[n],r);else r(t,e)}const $i={async createToken(t){let e=null,r=null,n=null;t||(e="Card details are missing in `swell.card.createToken(card)`",n="");const o=ji(t);if(!o.nonce){if(this.validateNumber(o.number)||(e="Card number appears to be invalid",r="invalid_card_number",n="number"),o.exp){const t=this.expiry(o.exp);o.exp_month=t.month,o.exp_year=t.year}this.validateExpiry(o.exp_month,o.exp_year)||(e="Card expiry appears to be invalid",r="invalid_card_expiry",n="exp_month"),this.validateCVC(o.cvc)||(e="Card CVC code appears to be invalid",r="invalid_card_cvc",n="exp_cvc")}if(e){const t=new Error(e);throw t.code=r||"invalid_card",t.status=402,t.param=n,t}const i=await Ui("post","/tokens",o);if(i.errors){const t=Object.keys(i.errors)[0],e=new Error(i.errors[t].message||"Unknown error");throw e.code="vault_error",e.status=402,e.param=t,e}return i},expiry(t){if(t&&t.month&&t.year)return t;const e=new String(t).split(/[\s\/\-]+/,2),r=e[0];let n=e[1];if(n&&2===n.length&&/^\d+$/.test(n)){n=(new Date).getFullYear().toString().substring(0,2)+n}return{month:~~r,year:~~n}},types(){let t,e,r,n;for(e={},t=r=40;r<=49;t=++r)e[t]="Visa";for(t=n=50;n<=59;t=++n)e[t]="MasterCard";return e[34]=e[37]="American Express",e[60]=e[62]=e[64]=e[65]="Discover",e[35]="JCB",e[30]=e[36]=e[38]=e[39]="Diners Club",e},type(t){return this.types()[t.slice(0,2)]||"Unknown"},luhnCheck(t){let e,r,n,o,i,a;for(n=!0,o=0,r=(t+"").split("").reverse(),i=0,a=r.length;i<a;i++)e=r[i],e=parseInt(e,10),(n=!n)&&(e*=2),e>9&&(e-=9),o+=e;return o%10==0},validateNumber(t){return(t=(t+"").replace(/\s+|-/g,"")).length>=10&&t.length<=16&&this.luhnCheck(t)},validateExpiry(t,e){let r,n;return t=String(t).trim(),e=String(e).trim(),!!/^\d+$/.test(t)&&(!!/^\d+$/.test(e)&&(parseInt(t,10)<=12&&(n=new Date(e,t),r=new Date,n.setMonth(n.getMonth()-1),n.setMonth(n.getMonth()+1,1),n>r)))},validateCVC:t=>(t=String(t).trim(),/^\d+$/.test(t)&&t.length>=3&&t.length<=4)};function Di(t){if(Pi())return;const e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function Bi(t,e,r={}){if(Pi())return;const n=new Date;n.setDate(n.getDate()+7),(r={path:"/",expires:n.toUTCString(),...r}).expires&&r.expires.toUTCString&&(r.expires=r.expires.toUTCString());let o=encodeURIComponent(t)+"="+encodeURIComponent(e);for(const t in r){o+="; "+t;const e=r[t];!0!==e&&(o+="="+e)}document.cookie=o}let Mi={};const zi={values({model:t,id:e},r){if(void 0===r)return Be(Mi,`${t}.${e}`,{});for(let n in r)$e(Mi,`${t}.${e}.${n}`,r[n])},preset(t){const{presets:e=[]}=this.values(t);e.push(t),this.values(t,{presets:e})},set(t){let{model:e,id:r,path:n,value:o}=t,{data:i={},record:a,presets:s}=this.values(t);if(null===r)return;if(void 0===a)return this.preset(t);i=mi(a||{},i);const{useCamelCase:u}=bi;if(u&&o&&"object"==typeof o&&(o=_i(o)),n||o instanceof Array){let t={...i||{}},e=u?"string"==typeof(c=n)?c.split(".").map(Uo).join("."):c:n;$e(t,e||"",o),i=t}else o&&"object"==typeof o?(i=i||{},i=mi(i,o)):i=o;var c;this.values(t,{data:i}),void 0!==Mi[e][r]&&(Mi[e][r]=JSON.parse(JSON.stringify(Mi[e][r])))},get(t,e){const{data:r,recordTimer:n}=this.values({model:t,id:e});if(n)return r},setRecord(t,e){let{recordTimer:r,presets:n}=this.values(e);if(r&&clearTimeout(r),r=setTimeout((()=>{this.values(e,{record:void 0,recordTimer:void 0})}),5e3),this.values(e,{record:t,recordTimer:r}),n){for(let t of n)this.set(t);this.values(e,{presets:void 0})}const o=this.get(e.model,e.id);return void 0!==o?o:t},async getFetch(t,e,r){const n=this.get(t,e);if(void 0!==n)return n;const o=await r();return this.setRecord(o,{model:t,id:e})},clear(t,e){t?$e(Mi,e?`${t}.${e}`:t,void 0):Mi={}}};let Li;function Yi(t){let e=t||[];if(t&&"object"==typeof t&&!(t instanceof Array)){e=[];for(const r in t)e.push({id:r,value:t[r]})}return e instanceof Array?e.map((t=>({id:t.id||t.name,value:t.value}))):e}function Ni(t,e){const r=Li.useCamelCase?ji(t):t,n={...r,price:r.price||0,sale_price:r.sale_price,orig_price:r.orig_price,stock_status:r.stock_status};let o=0;const i=[],a=Yi(e),s=function(t,e){return t.options?xi(e?t.options.filter(e):t.options,((t,e)=>{const r=xi(e.values,((t,e)=>({...t,[e.id]:{...e,id:e.id},[e.name]:{...e,id:e.id}})),{});return{...t,[e.id]:{...e,values:r},[e.name]:{...e,values:r}}}),{}):{}}(r);for(const t of a)s[t.id]&&s[t.id].values[t.value]&&(s[t.id].variant?i.push(s[t.id].values[t.value].id):o+=s[t.id].values[t.value].price||0);if(i.length>0){const t=function(t,e){if(e.length>0){const r=t.variants&&t.variants.results;if(r.length>0)for(const t of r){let r=!0;for(const n of e){const e=ji(t);if(e.option_value_ids&&-1===e.option_value_ids.indexOf(n)){r=!1;break}}if(r)return t}}return null}(r,i);t&&(n.price=t.price||0,n.sale_price=t.sale_price||r.sale_price,n.orig_price=t.orig_price||r.orig_price,n.stock_status=t.stock_status||r.stock_status,n.images=t.images&&t.images.length?t.images:r.images)}return o>0&&(n.price+=o,n.sale_price&&(n.sale_price+=o),n.orig_price&&(n.orig_price+=o)),void 0===n.sale_price&&delete n.sale_price,void 0===n.orig_price&&delete n.orig_price,Li.useCamelCase?_i(n):n}function qi(t,e={}){const r=(e.attributes||void 0===e.attributes)&&Vi(t),n=(e.categories||void 0===e.categories)&&Fi(t),o=(e.price||void 0===e.price)&&Ji(t);let i=[];return o&&i.push({id:"price",label:"Price",type:"range",options:[{value:o.min,label:o.min},{value:o.max,label:o.max}],interval:o.interval}),n&&n.length>0&&i.push({id:"category",label:"Category",type:"select",options:n.map((t=>({value:t.slug,label:t.name})))}),r&&r.length>0&&(i=[...i,...xi(r,((t,e)=>[...t,..."category"!==e.id&&"price"!==e.id&&e.values instanceof Array&&e.values.length>0?[{id:e.id,label:e.name,type:"select",options:e.values.map((t=>({value:t,label:t})))}]:[]]),[])]),i}function Fi(t){const e=[],r=t&&t.results||(t.id?[t]:t);if(r instanceof Array)for(let t of r)if(t.categories)for(let r of t.categories){if(!r)continue;Bn(e,{id:r.id})||e.push(r)}return e}function Vi(t){const e=[],r=t&&t.results||(t.id?[t]:t);if(r instanceof Array)for(let t of r)if(t.attributes)for(let r in t.attributes){if(!t.attributes[r])continue;const n=t.attributes[r].value;let o=Bn(e,{id:r});o?o.values=tr([...o.values,...n instanceof Array?n:[n]]):e.push({...t.attributes[r],value:void 0,values:[...n instanceof Array?n:[n]]})}return e}function Ji(t){let e,r,n;const o=t&&t.results||(t.id?[t]:t);if(o instanceof Array)for(let t of o)(void 0===r||t.price>r)&&(r=Math.ceil(t.price)),(void 0===e||t.price<e)&&(e=Math.floor(t.price));if(e===r)return null;for(n=Math.ceil((r-e)/10)||1,n>1e3?n=1e3:n>100?n=100:n>10&&(n=10),r%n>0&&(r=n+r-r%n),e%n>0&&(e-=e%n);(r-e)/n%1>0;)r++;return{min:e,max:r,interval:n}}function Zi(t,e){return{state:null,order:null,settings:null,requested:!1,pendingRequests:[],cacheClear:null,async requestStateChange(e,r,n,o){return this.requestStateSync((async()=>{const i=await t(e,r,n,o);return i&&i.errors||(this.state=i),i}))},async requestStateSync(t){if(this.state)return await t();if(this.requested)return new Promise((e=>{this.pendingRequests.push({handler:t,resolve:e})}));this.requested=!0;const e=await t();for(this.requested=!1;this.pendingRequests.length>0;){const{handler:t,resolve:e}=this.pendingRequests.shift();e(t())}return e},get(){let t;return this.cacheClear&&(this.cacheClear=null,t={$cache:!1}),this.requestStateChange("get","/cart",void 0,t)},clearCache(){this.cacheClear=!0},getItemData(t,e={}){let r=yi(t);return"string"==typeof t&&(r={...e||{},product_id:t}),r&&r.options&&(r.options=Yi(r.options)),r},addItem(t,e){return this.requestStateChange("post","/cart/items",this.getItemData(t,e))},updateItem(t,e){return this.requestStateChange("put",`/cart/items/${t}`,this.getItemData(e))},setItems(t){let e=t;return e&&e.map&&(e=e.map(this.getItemData)),this.requestStateChange("put","/cart/items",e)},removeItem(t){return this.requestStateChange("delete",`/cart/items/${t}`)},recover(t){return this.requestStateChange("put",`/cart/recover/${t}`)},update(t){let e=t;return e.items&&e.items.map&&(e={...e,items:e.items.map(this.getItemData)}),this.requestStateChange("put","/cart",e)},applyCoupon(t){return this.requestStateChange("put","/cart/coupon",{code:t})},removeCoupon(){return this.requestStateChange("delete","/cart/coupon")},applyGiftcard(t){return this.requestStateChange("post","/cart/giftcards",{code:t})},removeGiftcard(t){return this.requestStateChange("delete",`/cart/giftcards/${t}`)},async getShippingRates(){return await this.requestStateChange("get","/cart/shipment-rating"),this.state[e.useCamelCase?"shipmentRating":"shipment_rating"]},async submitOrder(){const e=await t("post","/cart/order");return e.errors||(this.state=null,this.order=e),e},async getOrder(e){let r;return r=e?await t("get","/cart/order",{checkout_id:e}):await t("get","/cart/order"),this.order=r,r},async getSettings(){return this.settings=await t("get","/cart/settings"),this.settings}}}function Gi(t,e){return{state:null,menuState:null,paymentState:null,sessionState:null,locale:null,localizedState:{},refresh(){return this.state=null,this.menuState=null,this.paymentState=null,this.sessionState=null,this.localizedState={},this.get()},getState(e,r,{id:n,def:o,refresh:i=!1}={}){return this[r]&&!i||(this[r]=t("get",e)),this[r]&&"function"==typeof this[r].then?this[r].then((t=>(this[r]=t,this.getLocalizedState(r,n,o)))):this.getLocalizedState(r,n,o)},getLocalizedState(t,r,n){this.locale||(this.locale=e.api.locale.selected());const o=this.localizedState;return o.code!==this.locale&&(o.code=this.locale,delete o[this.locale]),o[this.locale]||(o[this.locale]={}),o[this.locale][t]||(o[this.locale][t]=this.decodeLocale(this[t])),r?Be(o[this.locale][t],r,n):o[this.locale][t]},findState(t,e,{where:r,def:n}={}){const o=this.getState(t,e);return o&&"function"==typeof o.then?o.then((t=>Bn(t,r)||n)):Bn(o,r)||n},get(t,e){return this.getState("/settings","state",{id:t,def:e})},getStoreLocale(){return Be(this.state,"store.locale")},getStoreLocales(){return Be(this.state,"store.locales")},set({model:t,path:r,value:n}){const o=t?`${t.replace(/s$/,"")}State`:"state",{useCamelCase:i}=e;let a={};"menus"===t?void 0!==r?$e(a,r||"",n):a=n:$e(a,r||"",n),i&&(a=_i(a)),this[o]=mi(this[o],a),this.localizedState[this.locale]&&(this.localizedState[this.locale][o]=this.decodeLocale(this[o]))},menus(t,e){return this.findState("/settings/menus","menuState",{where:{id:t},def:e})},payments(t,e){return this.getState("/settings/payments","paymentState",{id:t,def:e})},session(t,e){return this.getState("/session","sessionState",{id:t,def:e})},decodeLocale(t){if(!t||"object"!=typeof t)return t;let e=this.getStoreLocales();return e=e?e.reduce(((t,e)=>({...t,[e.code]:e})),{}):{},Wi(yi(t),this.locale,e)},async load(){try{const{settings:e,menus:r,payments:n,session:o}=await t("get","/settings/all");this.state=e,this.menuState=r,this.paymentState=n,this.sessionState=o,this.localizedState={}}catch(t){console.error(`Swell: unable to loading settings (${t})`)}}}}function Wi(t,e,r){if(wi(t)){const n=Object.keys(t);for(let o of n)"$locale"==o&&(Xi(e,t,o,r),delete t.$locale),void 0!==t[o]&&(t[o]=Wi(t[o],e,r))}else if(t instanceof Array)for(var n=0;n<t.length;n++)t[n]=Wi(t[n],e,r);return t}function Xi(t,e,r,n){if(!t||!wi(e[r]))return;let o,i;const a=Object.keys(e[r]);for(let e of a){const r=e.replace(/\-.+$/,"");e!==t&&r!==t||(o=e,i=n[e])}if(!o&&wi(n)){const e=Object.keys(n);for(let r of e){const e=r.replace(/\-.+$/,"");r!==t&&e!==t||(o=r,i=n[r])}}let s,u={};if(i){let t=i.fallback;const o=t;for(;t&&(s=s||[],s.push(t),u={...e[r][t]||{},...u},t=n[t]&&n[t].fallback,o!==t););}let c={...u,...e[r][o]||{}};const l=Object.keys(c);for(let t of l){const n=null!==c[t]&&""!==c[t];let o=s&&!n;if(o)for(let n of s){if(o=!e[r][n]||null===e[r][n][t]||""===e[r][n][t],!o){e[t]=e[r][n][t];break}if("none"===n){e[t]=null;break}}else n&&(e[t]=c[t])}}var Hi=function(t){return Pe(t).toLowerCase()};var Ki=function(t){return function(e,r,n){for(var o=-1,i=Object(e),a=n(e),s=a.length;s--;){var u=a[t?s:++o];if(!1===r(i[u],u,i))break}return e}}();var Qi=function(t,e){return function(r,n){if(null==r)return r;if(!Vr(r))return t(r,n);for(var o=r.length,i=e?o:-1,a=Object(r);(e?i--:++i<o)&&!1!==n(a[i],i,a););return r}}((function(t,e){return t&&Ki(t,e,Jr)}));var ta=function(t,e,r,n,o){return o(t,(function(t,o,i){r=n?(n=!1,t):e(r,t,o,i)})),r};var ea=function(t,e,r){var n=zt(t)?no:ta,o=arguments.length<3;return n(t,An(e),r,o,Qi)},ra=Object.prototype.hasOwnProperty;var na=function(t){if(null==t)return!0;if(Vr(t)&&(zt(t)||"string"==typeof t||"function"==typeof t.splice||Pr(t)||Dr(t)||Or(t)))return!t.length;var e=an(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Lr(t))return!Fr(t).length;for(var r in t)if(ra.call(t,r))return!1;return!0};var oa=function(t,e){var r=-1,n=Vr(t)?Array(t.length):[];return Qi(t,(function(t,o,i){n[++r]=e(t,o,i)})),n};var ia=function(t,e){return(zt(t)?Ee:oa)(t,An(e))};const aa={city:"city",country:"country",line1:"address1",line2:"address2",postal_code:"zip",state:"state"},sa={name:"name",phone:"phone"};function ua(t){const{account:e={},billing:r,shipping:n}=t,o={...e.shipping,...e.billing,...n,...r},i=t=>ea(t,((t,e,r)=>{const n=o[e];return n&&(t[r]=n),t}),{}),a=i(sa);if(!na(a)){const t=i(aa);return{...a,...na(t)?{}:{address:t}}}}function ca(t){const e=Hi(Be(t,"currency","eur")),r=ia(t.items,(t=>({type:"sku",description:t.product.name,quantity:t.quantity,currency:e,amount:Math.round(100*In(t.price_total-t.discount_total))}))),n=Be(t,"tax_included_total");n&&r.push({type:"tax",description:"Taxes",currency:e,amount:Math.round(100*In(n))});const o=Be(t,"shipping",{}),i=Be(t,"shipment_total",{});return o.price&&r.push({type:"shipping",description:o.service_name,currency:e,amount:Math.round(100*In(i))}),r}async function la(t,e){const r={type:"klarna",flow:"redirect",amount:Math.round(100*Be(e,"grand_total",0)),currency:Hi(Be(e,"currency","eur")),klarna:{product:"payment",purchase_country:Be(e,"settings.country","DE")},source_order:{items:ca(e)},redirect:{return_url:window.location.href}};return function(t,e){const r=(t,e)=>ea(t,((t,r,n)=>{const o=e[r];return o&&(t[n]=o),t}),{});t.klarna={...t.klarna,...r({shipping_first_name:"first_name",shipping_last_name:"last_name"},e.shipping)};const n=r({phone:"phone"},e.shipping),o=r(aa,e.shipping);(n||o)&&(t.source_order.shipping={...n||{},...o?{address:o}:{}}),t.klarna={...t.klarna,...r({first_name:"first_name",last_name:"last_name"},e.billing||Be(e,"account.billing")||e.shipping)};const i=r({email:"email"},e.account),a=r(aa,e.billing||Be(e,"account.billing")||e.shipping);(i||a)&&(t.owner={...i||{},...a?{address:a}:{}})}(r,e),await t.createSource(r)}async function fa(t,e){const r={type:"bancontact",amount:Math.round(100*Be(e,"grand_total",0)),currency:Hi(Be(e,"currency","eur")),redirect:{return_url:window.location.href}};return function(t,e){const{account:r={},billing:n,shipping:o}=e,i={...r.shipping,...r.billing,...o,...n},a=((t,e)=>ea(aa,((t,r,n)=>{const o=e[r];return o&&(t[n]=o),t}),{}))(0,i);t.owner={email:r.email,name:i.name||r.name,...i.phone?{phone:i.phone}:r.phone?{phone:r.phone}:{},...na(a)?{}:{address:a}}}(r,e),await t.createSource(r)}function ha(t,e){return["BIF","DJF","JPY","KRW","PYG","VND","XAF","XPF","CLP","GNF","KMF","MGA","RWF","VUV","XOF"].includes(t.toUpperCase())?e:Math.round(100*e)}const pa={},da={},ga={};function va(t){return{params:null,methodSettings:null,async methods(){if(this.methodSettings)return this.methodSettings;const e=await t("get","/payment/methods");return this.methodSettings=e},async createElements(e){this.params=e||{};const r=ji(await Zi.methods(t).get());if(!r)throw new Error("Cart not found");const n=ji(await Gi.methods(t).payments());if(n.error)throw new Error(n.error);await async function(t,e,r,n){n.card&&(r.card?"braintree"===r.card.gateway?window.braintree||await ya("braintree-web","https://js.braintreegateway.com/web/3.57.0/js/client.min.js"):"stripe"===r.card.gateway&&(window.Stripe||await ya("stripe-js","https://js.stripe.com/v3/"),await ba(t,r,n)):console.error("Payment element error: credit card payments are disabled. See Payment settings in the Swell dashboard for details."));n.ideal&&(r.card?r.ideal?"stripe"===r.card.gateway&&(window.Stripe||await ya("stripe-js","https://js.stripe.com/v3/"),await ba(t,r,n)):console.error("Payment element error: iDEAL payments are disabled. See Payment settings in the Swell dashboard for details."):console.error("Payment element error: credit card payments are disabled. See Payment settings in the Swell dashboard for details."));n.paypal&&(r.paypal?(window.paypal||await ya("paypal-sdk",`https://www.paypal.com/sdk/js?client-id=${r.paypal.client_id}&merchant-id=${r.paypal.merchant_id}&vault=true`),r.card&&"braintree"===r.card.gateway&&"braintree"===r.paypal.gateway&&(window.braintree||await ya("braintree-web","https://js.braintreegateway.com/web/3.57.0/js/client.min.js"),window.braintree&&!window.braintree.paypalCheckout&&await ya("braintree-web-paypal-checkout","https://js.braintreegateway.com/web/3.57.0/js/paypal-checkout.min.js"),await async function(t,e,r,n){const o=await Ui("post","/authorization",{gateway:"braintree"});if(o.error)throw new Error(o.error);const i=window.braintree,a=window.paypal;i.client.create({authorization:o}).then((t=>i.paypalCheckout.create({client:t}))).then((r=>a.Buttons({style:n.paypal.style||{},createBillingAgreement:()=>r.createPayment({flow:"vault",currency:e.currency,amount:e.grand_total}),onApprove:(e,o)=>r.tokenizePayment(e).then((({nonce:e})=>Zi.methods(t).update({billing:{paypal:{nonce:e}}}))).then((()=>Ri(n.paypal.onSuccess)&&n.paypal.onSuccess(e,o))).catch(Ri(n.paypal.onError)?n.paypal.onError:t=>console.error("PayPal error",t)),onCancel:Ri(n.paypal.onCancel)?()=>n.paypal.onCancel():()=>console.log("PayPal payment cancelled"),onError:Ri(n.paypal.onError)?t=>n.paypal.onError(t):t=>console.error("PayPal error",t)}).render(n.paypal.elementId||"#paypal-button"))).catch(Ri(n.paypal.onError)?n.paypal.onError:t=>console.error("PayPal error",t))}(t,e,0,n))):console.error("Payment element error: PayPal payments are disabled. See Payment settings in the Swell dashboard for details."))}(t,r,n,this.params)},async tokenize(e){const r=ji(await Zi.methods(t).get());if(!r)throw new Error("Cart not found");const n=ji(await Gi.methods(t).payments());if(n.error)throw new Error(n.error);return await async function(t,e,r,n){const o=t=>{const r=Be(e,"card.onError")||Be(e,"ideal.onError")||Be(e,"klarna.onError")||Be(e,"bancontact.onError");if(Ri(r))return r(t);throw new Error(t.message)};if(!e)return o({message:"Tokenization parameters not passed"});if(e.card&&r.card){if("stripe"===r.card.gateway&&da.stripe&&ga.stripe){const r=ga.stripe,i=await async function(t,e,r){const n=ua(r),{error:o,paymentMethod:i}=await t.createPaymentMethod({type:"card",card:e,...n?{billing_details:n}:{}});return o?{error:o}:{token:i.id,last4:i.card.last4,exp_month:i.card.exp_month,exp_year:i.card.exp_year,brand:i.card.brand,address_check:i.card.checks.address_line1_check,cvc_check:i.card.checks.cvc_check,zip_check:i.card.checks.address_zip_check}}(r,da.stripe,n);if(i.error)return o(i.error);const a=Hi(Be(n,"currency","usd")),s=ha(a,Be(n,"grand_total",0)),u=Be(n,"account.stripe_customer"),c=ji(await va(t).createIntent({gateway:"stripe",intent:{payment_method:i.token,amount:s,currency:a,capture_method:"manual",setup_future_usage:"off_session",...u?{customer:u}:{}}}).catch((t=>o(t))));if(c&&"requires_confirmation"===c.status){const{paymentIntent:n,error:a}=await r.confirmCardPayment(c.client_secret);return a?o(a):await Zi.methods(t).update({billing:{method:"card",card:i,intent:{stripe:{id:n.id}}}}).then((()=>Ri(e.card.onSuccess)&&e.card.onSuccess())).catch((t=>o(t)))}}}else if(e.ideal&&r.ideal){if(r.card&&"stripe"===r.card.gateway&&da.stripe&&ga.stripe){const{error:e,paymentMethod:r}=await async function(t,e,r={}){const n=ua(r);return await t.createPaymentMethod({type:"ideal",ideal:e,...n?{billing_details:n}:{}})}(ga.stripe,da.stripe,n.billing);if(e)return o(e);const i=Hi(Be(n,"currency","eur")),a=ha(i,Be(n,"grand_total",0)),s=ji(await va(t).createIntent({gateway:"stripe",intent:{payment_method:r.id,amount:a,currency:i,payment_method_types:"ideal",confirmation_method:"manual",confirm:!0,return_url:window.location.href}}).catch((t=>o(t))));if(s)return await Zi.methods(t).update({billing:{method:"ideal",ideal:{token:r.id},intent:{stripe:{id:s.id}}}}).catch((t=>o(t))),("requires_action"===s.status||"requires_source_action"===s.status)&&await ga.stripe.handleCardAction(s.client_secret)}}else if(e.klarna&&r.klarna){if(r.card&&"stripe"===r.card.gateway){window.Stripe||await ya("stripe-js","https://js.stripe.com/v3/");const{publishable_key:e}=r.card,i=window.Stripe(e),a=ji(await Gi.methods(t).get()),{error:s,source:u}=await la(i,{...n,settings:a.store});return s?o(s):Zi.methods(t).update({billing:{method:"klarna"}}).then((()=>window.location.replace(u.redirect.url))).catch((t=>o(t)))}}else if(e.bancontact&&r.bancontact&&r.card&&"stripe"===r.card.gateway){window.Stripe||await ya("stripe-js","https://js.stripe.com/v3/");const{publishable_key:e}=r.card,i=window.Stripe(e),{error:a,source:s}=await fa(i,n);return a?o(a):Zi.methods(t).update({billing:{method:"bancontact"}}).then((()=>window.location.replace(s.redirect.url))).catch((t=>o(t)))}}(t,e||this.params,n,r)},async createIntent(t){const e=await Ui("post","/intent",t);if(e.errors){const t=Object.keys(e.errors)[0],r=new Error(e.errors[t].message||"Unknown error");throw r.code="vault_error",r.status=402,r.param=t,r}return e},async updateIntent(t){const e=await Ui("put","/intent",t);if(e.errors){const t=Object.keys(e.errors)[0],r=new Error(e.errors[t].message||"Unknown error");throw r.code="vault_error",r.status=402,r.param=t,r}return e}}}const ya=async(t,e)=>(pa[t]=pa[t]||new Promise((r=>{const n=document.createElement("script");n.id=t,n.src=e,n.async=!0,n.type="text/javascript",n.addEventListener("load",(()=>{r(),pa[t]=null}),{once:!0}),document.head.appendChild(n)})),pa[t]);async function ba(t,e,r){const{publishable_key:n}=e.card,o=window.Stripe(n),i=o.elements(),a=t=>{const e=Be(r,`card[${t}]`)||r.card||r.ideal,n=e.options||{},o=i.create(t,n);o.mount(e.elementId||`#${t}-element`),e.onChange&&o.on("change",e.onChange),e.onReady&&o.on("ready",e.onReady),e.onFocus&&o.on("focus",e.onFocus),e.onBlur&&o.on("blur",e.onBlur),e.onEscape&&o.on("escape",e.onEscape),e.onClick&&o.on("click",e.onClick),"card"!==t&&"cardNumber"!==t&&"idealBank"!==t||(da.stripe=o)};ga.stripe=o,r.ideal?a("idealBank"):r.card.separateElements?(a("cardNumber"),a("cardExpiry"),a("cardCvc")):a("card")}const ma={store:null,key:null,url:null,useCamelCase:null,previewContent:null},wa={options:ma,request:_a,init(t,e,r={}){ma.key=e,ma.store=t,ma.url=r.url?Ci(r.url):`https://${t}.swell.store`,ma.vaultUrl=r.vaultUrl?Ci(r.vaultUrl):"https://vault.schema.io",ma.timeout=r.timeout&&parseInt(r.timeout,10)||2e4,ma.useCamelCase=r.useCamelCase||!1,ma.previewContent=r.previewContent||!1,ma.session=r.session,ma.locale=r.locale,ma.currency=r.currency,ma.api=wa,bi=ma},auth(...t){return this.init(...t)},get:(t,e)=>_a("get",t,e),put:(t,e)=>_a("put",t,e),post:(t,e)=>_a("post",t,e),delete:(t,e)=>_a("delete",t,e),cache:zi,card:$i,cart:Zi(_a,ma),account:function(t){return{state:null,async requestStateChange(e,r,n,o){const i=await t(e,r,n,o);return i&&i.errors?i:this.state=i},get(t){return this.requestStateChange("get","/account",t)},create(t){return this.requestStateChange("post","/account",t)},update(t){return this.requestStateChange("put","/account",t)},login(t,e){return this.requestStateChange("post","/account/login",{email:t,password:e})},logout(){return this.state=null,t("post","/account/logout")},recover:e=>t("post","/account/recover",e),listAddresses:e=>t("get","/account/addresses",e),createAddress:e=>t("post","/account/addresses",e),updateAddress:(e,r)=>t("put",`/account/addresses/${e}`,r),deleteAddress:e=>t("delete",`/account/addresses/${e}`),listCards:e=>t("get","/account/cards",e),createCard:e=>t("post","/account/cards",e),updateCard:(e,r)=>t("put",`/account/cards/${e}`,r),deleteCard:e=>t("delete",`/account/cards/${e}`),listOrders:e=>t("get","/account/orders",e),getOrder:e=>t("get",`/account/orders/${e}`),getAddresses:e=>t("get","/account/addresses",e),getCards:e=>t("get","/account/cards",e),getOrders:e=>t("get","/account/orders",e)}}(_a),products:function(t,e){Li=e;const{get:r,list:n}=ki(t,"/products",["list","get"]);return{get:(t,...e)=>zi.getFetch("products",t,(()=>r(t,...e))),list:n,variation:Ni,categories:Fi,attributes:Vi,priceRange:Ji,filters:qi}}(_a,ma),categories:function(t){const{get:e,list:r}=ki(t,"/categories",["list","get"]);return{get:(t,...r)=>zi.getFetch("categories",t,(()=>e(t,...r))),list:r}}(_a),attributes:function(t){const{get:e,list:r}=ki(t,"/attributes",["list","get"]);return{get:(t,...r)=>zi.getFetch("attributes",t,(()=>e(t,...r))),list:r}}(_a),subscriptions:function(t){return{get:(e,r)=>t("get","/subscriptions",e,r),getCleanData:t=>(t&&t.options&&(t.options=Yi(t.options)),t.items&&t.items.map&&(t.items=t.items.map((t=>(t.options&&(t.options=Yi(t.options)),t)))),t),create(e){return t("post","/subscriptions",this.getCleanData(e))},update(e,r){return t("put",`/subscriptions/${e}`,this.getCleanData(r))},addItem(e,r){return t("post",`/subscriptions/${e}/items`,this.getCleanData(r))},setItems(e,r){return r&&r.map&&(r=r.map(this.getCleanData)),t("put",`/subscriptions/${e}/items`,r)},updateItem(e,r,n){return t("put",`/subscriptions/${e}/items/${r}`,this.getCleanData(n))},removeItem:(e,r)=>t("delete",`/subscriptions/${e}/items/${r}`)}}(_a),content:function(t,e){return{get:(r,n,o)=>zi.getFetch(`content_${r}`,n,(()=>t("get",`/content/${r}`,n,{$preview:e.previewContent,...o||{}}))),list:(e,r)=>t("get",`/content/${e}`,void 0,r)}}(_a,ma),settings:Gi(_a,ma),payment:va(_a),locale:function(t,e){return{code:null,state:null,list:()=>e.api.settings.get("store.locales",[]),async select(r){return this.set(r),Bi("swell-locale",r),e.api.settings.locale=r,await t("put","/session",{locale:r})},selected(){if(this.code)return this.code;const t=e.api.settings.getStoreLocale(),r=Di("swell-locale");return e.api.settings.locale=r||t,r||t},get(){return this.code||(this.code=this.selected()),this.state||(this.state=this.set(this.code)),this.state},set(t){return this.code=t,this.state=Bn(this.list(),{code:t})||{},this.state}}}(_a,ma),currency:function(t,e){return{code:null,state:null,locale:null,formatter:null,list:()=>e.api.settings.get("store.currencies",[]),async select(e){return this.set(e),Bi("swell-currency",e),await t("put","/session",{currency:e})},selected(){if(this.code)return this.code;const t=e.api.settings.get("store.currency");return Di("swell-currency")||t},get(){return this.code||(this.code=this.selected()),this.state||(this.state=this.set(this.code)),this.state},set(t){this.code=t,this.locale=e.api.settings.get("store.locale","object"==typeof navigator?navigator.language:"en-US"),this.state=Bn(this.list(),{code:t})||{};try{this.formatter=new Intl.NumberFormat(this.locale,{style:"currency",currency:t,currencyDisplay:"symbol",minimumFractionDigits:this.state.decimals,maximumFractionDigits:this.state.decimals})}catch(t){console.error(t)}return this.state},format(t,e={}){let r=this.get();if(e.code&&e.code!==r.code){const t=this.list();r=Bn(t,{code:e.code})||{}}const{code:n,rate:o,decimals:i,type:a}=r,s=e.code||n,u=e.rate||o,c=e.locale||this.locale,l="number"==typeof e.decimals?e.decimals:i;let f,h=t;"display"!==a&&!e.rate||"number"!=typeof u||(h=t*u);try{return f=s===this.state.code&&c===this.locale&&l===this.state.decimals?this.formatter:new Intl.NumberFormat(c,{style:"currency",currency:s,currencyDisplay:"symbol",minimumFractionDigits:l,maximumFractionDigits:l}),"number"==typeof h?f.format(h):Be(f.formatToParts(0),"0.value","$")}catch(t){console.error(t)}return String(t)}}}(_a,ma)};async function _a(t,e,r,n,o){const i=String(t).toLowerCase();let a=e,s=r;void 0===n&&"string"!=typeof r||(a=[Ci(e),Ei(r)].join("/"),s=n);const u={...ma,...o},c=`${u.url}${u.base||""}/api`;var l;let f;if(a=u.fullUrl||`${c}/${l=a,Ei(Ci(l))}`,s=u.useCamelCase?ji(s):s,"get"===i){let t;[a,t]=a.split("?");const e=[t,Oi(s)].join("&").replace(/^&/,"");a=`${a}${e?`?${e}`:""}`}else f=JSON.stringify(s);const h=u.session||Di("swell-session"),p=u.locale||Di("swell-locale"),d=u.currency||Di("swell-currency"),g={"Content-Type":"application/json",Authorization:`Basic ${v=String(u.key),"undefined"!=typeof btoa?btoa(v):b.from(v).toString("base64")}`,...h?{"X-Session":h}:{},...p?{"X-Locale":p}:{},...d?{"X-Currency":d}:{}};var v;const y=await fetch(a,{method:i,headers:g,body:f,credentials:"include",mode:"cors"}),m=y.headers.get("X-Session");"string"==typeof m&&h!==m&&Bi("swell-session",m);const w=await y.json();if(w&&w.error){const t=new Error(w.error.message);throw t.status=y.status,t.code=w.error.code,t.param=w.error.param,t}if(!y.ok){const t=new Error("A connection error occurred while making the request");throw t.code="connection_error",t}return ma.useCamelCase?_i(w):w}"undefined"!=typeof window&&(window.swell={version:"@VERSION@"});export default wa;
